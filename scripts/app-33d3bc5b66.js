(function(){var t,e,n,o,r,i=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(){function t(){this.tour=null}return t.prototype.newFormShown=function(){return!1},t.prototype.listShown=function(){return!1},t.prototype.newButShown=function(){return!1},t.prototype.tour=null,t.prototype.editIndex=null,t.prototype.canCancel=function(){return!0},t}(),o=function(t){function e(){this.canCancel=i(this.canCancel,this),this.tour=new Tour}return u(e,t),e.prototype.newFormShown=function(){return!0},e.prototype.canCancel=function(){return this.tour.isEmpty()||confirm("Есть несохраненные изменения. Продолжить?")?!0:!1},e}(t),n=function(t){function e(t,e){this.tour=t,this.editIndex=e,this.tour.keepCopy()}return u(e,t),e.prototype.listShown=function(){return!0},e.prototype.canCancel=function(){return!this.tour.hasChanges()||confirm("Есть несохраненные изменения. Продолжить?")?!0:!1},e}(t),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.listShown=function(){return!0},e.prototype.newButShown=function(){return!0},e}(t),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.listShown=function(){return!0},e}(t)}).call(this),function(){angular.module("voyageVoyage",["ngRoute","ngResource","underscore"])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;angular.module("voyageVoyage").controller("AdminToursController",["$scope","$q","TourPersistence","PersistenceService","ResourceFactory","_",function(n,o,r,i,u,s){var c,a,l,p,d,h,f,m,y,g,w,v,b,I;return f="Есть несохраненные изменения. Продолжить?",d="Удалить тур?",c=function(){function t(){this.tour=null}return t.prototype.newFormShown=function(){return!1},t.prototype.listShown=function(){return!1},t.prototype.newButShown=function(){return!1},t.prototype.tour=null,t.prototype.editIndex=null,t.prototype.canCancel=function(){return!0},t}(),p=function(n){function o(){this.canCancel=t(this.canCancel,this),this.tour=new h}return e(o,n),o.prototype.newFormShown=function(){return!0},o.prototype.canCancel=function(){return this.tour.isEmpty()||confirm("Есть несохраненные изменения. Продолжить?")?!0:!1},o}(c),l=function(t){function n(t,e){this.tour=t,this.editIndex=e,this.tour.keepCopy()}return e(n,t),n.prototype.listShown=function(){return!0},n.prototype.canCancel=function(){return!this.tour.hasChanges()||confirm("Есть несохраненные изменения. Продолжить?")?!0:!1},n}(c),a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.listShown=function(){return!0},n.prototype.newButShown=function(){return!0},n}(c),m=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.listShown=function(){return!0},n}(c),h=function(){function e(e,n,o,r,i,u){this.title=e,this.text=n,this.countryId=o,this.duration=r,this.placeId=i,this.price=u,this.hasChanges=t(this.hasChanges,this),this.rejectChanges=t(this.rejectChanges,this),this.id=moment().unix()}var n;return n=null,e.prototype.keepCopy=function(){return n=(new e).fromJSON(this)},e.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.id=t.id,this.title=t.title,this.text=t.text,this.countryId=t.countryId,this.duration=t.duration,this.placeId=t.placeId,this.price=t.price,this},e.prototype.commitChanges=function(){return n=null},e.prototype.rejectChanges=function(){return n&&(this.objectId=n.objectId,this.id=n.id,this.title=n.title,this.text=n.text,this.countryId=n.countryId,this.duration=n.duration,this.price=n.price),n=null},e.prototype.hasChanges=function(){return!this.isEqual(n)},e.prototype.isEmpty=function(){return!this.title&!this.text&!this.countryId&!this.price&!this.duration},e.prototype.isEqual=function(t){return this.text===t.text&&this.title===t.title&&this.countryId===t.countryId&&this.price===t.price},e}(),w=function(){var t;return t=o.defer(),i.loadResource("place").$promise.then(function(e){return t.resolve(e)}),t.promise},g=function(){var t;return t=o.defer(),i.loadResource("country").$promise.then(function(e){return t.resolve(e)}),t.promise},y=function(){var t;return t=o.defer(),i.loadResource("tour").$promise.then(function(e){return t.resolve(e)}),t.promise},y=function(t){return i.loadResource("tour",t)},I=function(t){return i.saveResource("tour",t)},b=function(t){return i.removeResource("tour",t)},v={tours:y(),places:w(),countries:g()},o.all(v).then(function(t){var e;return console.log(t),n.tours=function(){var n,o,r,i;for(r=t.tours,i=[],n=0,o=r.length;o>n;n++)e=r[n],i.push((new h).fromJSON(e));return i}(),n.countries=t.countries,n.places=t.places,n.setState("browse")}),n.setState=function(t,e,o){return console.log(t),n.uiState=function(){switch(t){case"browse":return new a;case"new":return new p;case"inlineEdit":return new l(e,o)}}(),n.tour=n.uiState.tour,console.log(n.uiState)},n.add=function(){return n.tours.push(this.tour),i.saveResource(this.tour),i.save(n.tours),n.setState("browse")},n.update=function(){return n.tour.commitChanges(),i.saveTour(this.tour),i.save(n.tours),n.setState("browse")},n.cancel=function(){return n.uiState.canCancel()?(n.tour.rejectChanges(),n.setState("browse")):void 0},n.remove=function(t){return confirm(d)?(n.tours.splice(t,1),i.removeTour(this.tour),i.save(n.tours)):void 0},n.getCountryById=function(t){var e;return e=s.find(n.countries,function(e){return e.objectId===t}),e?e.name:"n/a"},n.getPlaceById=function(t){var e;return e=s.find(n.places,function(e){return e.objectId===t}),e?e.name:"n/a"}}])}.call(this),function(){angular.module("voyageVoyage").factory("TourPersistence",["$resource",function(t){var e;return e=function(t,e){var n;return n=angular.fromJson(t),n.results},t("https://api.parse.com/1/classes/tour/:objectId",{objectId:"@objectId"},{query:{isArray:!0,transformResponse:e},update:{method:"PUT"}})}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n,o,r,i,u){this.title=t,this.text=n,this.countryId=o,this.duration=r,this.placeId=i,this.price=u,this.hasChanges=e(this.hasChanges,this),this.rejectChanges=e(this.rejectChanges,this),this.id=moment().unix()}var n;return n=null,t.prototype.keepCopy=function(){return n=(new t).fromJSON(this)},t.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.id=t.id,this.title=t.title,this.text=t.text,this.countryId=t.countryId,this.duration=t.duration,this.placeId=t.placeId,this.price=t.price,this},t.prototype.commitChanges=function(){return n=null},t.prototype.rejectChanges=function(){return n&&(this.objectId=n.objectId,this.id=n.id,this.title=n.title,this.text=n.text,this.countryId=n.countryId,this.duration=n.duration,this.price=n.price),n=null},t.prototype.hasChanges=function(){return!this.isEqual(n)},t.prototype.isEmpty=function(){return!this.title&!this.text&!this.countryId&!this.price&!this.duration},t.prototype.isEqual=function(t){return this.text===t.text&&this.title===t.title&&this.countryId===t.countryId&&this.price===t.price},t}()}.call(this),function(){var t,e,n,o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;o=function(){function t(){this.place=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.newButShown=function(){return!0},e.prototype.editRemoveShown=function(){return!0},e}(o),n=function(t){function e(){this.place=new Place}return r(e,t),e.prototype.newFormShown=function(){return!0},e}(o),e=function(t){function e(t,e){this.place=t,this.editIndex=e,this.place.keepCopy()}return r(e,t),e.prototype.newButDisabled=function(){return!0},e.prototype.newButShown=function(){return!0},e}(o)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;angular.module("voyageVoyage").controller("PlacesController",["$scope","$resource","PersistenceService","$q",function(n,o,r,i){var u,s,c,a,l,p,d,h,f,m;return a=function(){function e(e){this.name=e,this.hasChanges=t(this.hasChanges,this),this.rejectChanges=t(this.rejectChanges,this),this.commitChanges=t(this.commitChanges,this),this.id=moment().unix()}var n;return n=null,e.prototype.keepCopy=function(){return n=(new e).fromJSON(this)},e.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.id=t.id,this.name=t.name,this.country=t.country,this},e.prototype.commitChanges=function(){return n=null},e.prototype.rejectChanges=function(){return n&&(this.id=n.id,this.name=n.name,this.country=n.country),n=null},e.prototype.hasChanges=function(){return!this.isEqual(n)},e.prototype.isEmpty=function(){return!this.name},e.prototype.isEqual=function(t){return this.name===t.name},e}(),l=function(){function t(){this.place=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.newButShown=function(){return!0},n.prototype.editRemoveShown=function(){return!0},n}(l),c=function(t){function n(){this.place=new a}return e(n,t),n.prototype.newFormShown=function(){return!0},n}(l),s=function(t){function n(t,e){this.place=t,this.editIndex=e,this.place.keepCopy()}return e(n,t),n.prototype.newButDisabled=function(){return!0},n.prototype.newButShown=function(){return!0},n}(l),d=function(){var t;return t=i.defer(),r.loadResource("country").$promise.then(function(e){return t.resolve(e)}),t.promise},p=function(){var t;return t=i.defer(),r.loadResource("place").$promise.then(function(e){return t.resolve(e)}),t.promise},m=function(t){return r.saveResource("place",t)},f=function(t){return r.removeResource("place",t)},h={places:p(),countries:d()},i.all(h).then(function(t){var e;return n.places=function(){var n,o,r,i;for(r=t.places,i=[],n=0,o=r.length;o>n;n++)e=r[n],i.push((new a).fromJSON(e));return i}(),n.countries=t.countries,n.state=new u}),n.add=function(){return m(n.state.place),n.places.push(n.state.place),n.setState("browse")},n.update=function(){return m(n.state.place),n.state.place.commitChanges(),n.setState("browse")},n.cancelEdit=function(){return n.state.place.rejectChanges(),n.setState("browse")},n.remove=function(t){var e;return confirm("Удалить?")?(f(n.state.place),e=n.places[t],n.places.splice(t)):void 0},n.setState=function(t,e,o){return n.state=function(){switch(t){case"browse":return new u;case"add":return new c;case"edit":return new s(o,e)}}()}}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.name=t,this.hasChanges=e(this.hasChanges,this),this.rejectChanges=e(this.rejectChanges,this),this.commitChanges=e(this.commitChanges,this),this.id=moment().unix()}var n;return n=null,t.prototype.keepCopy=function(){return n=(new t).fromJSON(this)},t.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.id=t.id,this.name=t.name,this.country=t.country,this},t.prototype.commitChanges=function(){return n=null},t.prototype.rejectChanges=function(){return n&&(this.id=n.id,this.name=n.name,this.country=n.country),n=null},t.prototype.hasChanges=function(){return!this.isEqual(n)},t.prototype.isEmpty=function(){return!this.name},t.prototype.isEqual=function(t){return this.name===t.name},t}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.name=t,this.hasChanges=e(this.hasChanges,this),this.rejectChanges=e(this.rejectChanges,this),this.commitChanges=e(this.commitChanges,this),this.id=moment().unix()}var n;return n=null,t.prototype.keepCopy=function(){return n=(new t).fromJSON(this)},t.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.id=t.id,this.name=t.name,this},t.prototype.commitChanges=function(){return n=null},t.prototype.rejectChanges=function(){return n?(this.id=n.id,this.name=n.name,n=null):void 0},t.prototype.hasChanges=function(){return!this.isEqual(n)},t.prototype.isEmpty=function(){return!this.name},t.prototype.isEqual=function(t){return this.name===t.name},t}()}.call(this),function(){var t,e,n,o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(){function t(){this.country=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.newButShown=function(){return!0},e.prototype.editRemoveShown=function(){return!0},e}(t),o=function(t){function e(){this.country=new Country}return r(e,t),e.prototype.newFormShown=function(){return!0},e}(t),n=function(t){function e(t,e){this.country=t,this.editIndex=e,this.country.keepCopy()}return r(e,t),e.prototype.newButDisabled=function(){return!0},e.prototype.newButShown=function(){return!0},e}(t)}.call(this),function(){angular.module("voyageVoyage").factory("CountryDbFactory",["$resource",function(t){var e;return e=t("https://api.parse.com/1/classes/country/:objectId",{objectId:"@objectId"},{query:{isArray:!0,transformResponse:parseResults},update:{method:"PUT"}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;angular.module("voyageVoyage").controller("CountriesController",["$scope","$resource","PersistenceService",function(n,o,r){var i,u,s,c,a,l,p;return s=function(){function e(e){this.name=e,this.hasChanges=t(this.hasChanges,this),this.rejectChanges=t(this.rejectChanges,this),this.commitChanges=t(this.commitChanges,this),this.id=moment().unix()}var n;return n=null,e.prototype.keepCopy=function(){return n=(new e).fromJSON(this)},e.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.id=t.id,this.name=t.name,this},e.prototype.commitChanges=function(){return n=null},e.prototype.rejectChanges=function(){return n?(this.id=n.id,this.name=n.name,n=null):void 0},e.prototype.hasChanges=function(){return!this.isEqual(n)},e.prototype.isEmpty=function(){return!this.name},e.prototype.isEqual=function(t){return this.name===t.name},e}(),i=function(){function t(){this.country=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.newButShown=function(){return!0},n.prototype.editRemoveShown=function(){return!0},n}(i),l=function(t){function n(){this.country=new s}return e(n,t),n.prototype.newFormShown=function(){return!0},n}(i),a=function(t){function n(t,e){this.country=t,this.editIndex=e,this.country.keepCopy()}return e(n,t),n.prototype.newButDisabled=function(){return!0},n.prototype.newButShown=function(){return!0},n}(i),p=function(t,e){var n;return n=angular.fromJson(t),n.results},c=o("https://api.parse.com/1/classes/country/:objectId",{objectId:"@objectId"},{query:{isArray:!0,transformResponse:p},update:{method:"PUT"}}),function(){return c.query().$promise.then(function(t){var e;return n.countries=function(){var n,o,r;for(r=[],n=0,o=t.length;o>n;n++)e=t[n],r.push((new s).fromJSON(e));return r}(),n.state=new u})}(),n.add=function(){var t;return t=new c({name:n.state.country.name}),t.$save().then(function(t){return n.state.country.objectId=t.objectId,n.countries.push(n.state.country),n.setState("browse")})},n.update=function(){var t,e;return t=n.state.country,e=new c(t),e.$update().then(function(t){return n.state.country.commitChanges(),n.setState("browse")})},n.cancelEdit=function(){return n.state.country.rejectChanges(),n.setState("browse")},n.remove=function(t){var e,o;return confirm("Удалить?")?(e=n.countries[t],o=new c({objectId:e.objectId}),o.$remove().then(function(e){return n.countries.splice(t)})["catch"](function(t){return console.log(t)})):void 0},n.setState=function(t,e,o){return n.state=function(){switch(t){case"browse":return new u;case"add":return new l;case"edit":return new a(o,e)}}()}}])}.call(this),function(){angular.module("voyageVoyage").controller("ToursController",["$scope","$q","PersistenceService","_",function(t,e,n,o){var r,i,u,s;return u=function(){var t;return t=e.defer(),n.loadResource("place").$promise.then(function(e){return t.resolve(e)}),t.promise},i=function(){var t;return t=e.defer(),n.loadResource("country").$promise.then(function(e){return t.resolve(e)}),t.promise},r=function(){var t;return t=e.defer(),n.loadResource("tour").$promise.then(function(e){return t.resolve(e)}),t.promise},s={tours:r(),places:u(),countries:i()},e.all(s).then(function(e){return console.log(e),t.tours=e.tours,t.countries=e.countries,t.places=e.places}),t.countryFilter=function(e){return t.selectedCountry?e.countryId===t.selectedCountry.objectId:!0},t.placeFilter=function(e){return t.selectedPlace?e.placeId===t.selectedPlace.objectId:!0},t.shortenText=function(t){return t.substring(0,350)+"..."},t.getCountryById=function(e){var n;return n=o.find(t.countries,function(t){return t.objectId===e}),n.name},t.getPlaceById=function(e){var n;return n=o.find(t.places,function(t){return t.objectId===e}),n?n.name:"n/a"}}])}.call(this),function(){angular.module("voyageVoyage").controller("TourController",["$scope","$routeParams","PersistenceService","_",function(t,e,n,o){return this.loadDependencies=function(){return n.loadResourceById("country",t.tour.countryId).$promise.then(function(e){return t.country=e}),n.loadResourceById("place",t.tour.placeId).$promise.then(function(e){return t.place=e})},n.loadResourceById("tour",e.slug).$promise.then(function(e){return function(n){return t.tour=n,e.loadDependencies()}}(this))}])}.call(this),function(){angular.module("voyageVoyage").factory("ResourceFactory",["$resource",function(t){return function(e){var n,o;return o="https://api.parse.com/1/classes/"+e+"/:objectId",console.log(o),n=t(o,{objectId:"@objectId"},{query:{isArray:!0,transformResponse:function(t,e){return angular.fromJson(t).results}},update:{method:"PUT"},getById:{method:"GET",isArray:!1}})}}])}.call(this),function(){angular.module("voyageVoyage").service("PersistenceService",["$resource","$q","ResourceFactory",function(t,e,n){return{loadResourceById:function(t,e){return n(t).getById({objectId:e})},loadResource:function(t){return n(t).query()},saveResource:function(t,e){var o,r;return r=n(t),o=new r(e),e.objectId?o.$update().then(function(t){return e.commitChanges()})["catch"](function(t){return console.log(t),alert("Error!")}):o.$save().then(function(t){return e.objectId=t.objectId})["catch"](function(t){return console.log(t),alert("Error!")})},removeResource:function(t,e){var o,r;return r=n(t),o=new r(e),o.$remove()["catch"](function(t){return console.log(t),alert("Error!")})},countriesDefault:function(){return[{id:0,name:"Россия"},{id:1,name:"США"},{id:2,name:"Испания"},{id:3,name:"Турция"},{id:4,name:"Греция"},{id:5,name:"Чехия"}]},toursDefault:function(){var t;return t="Lorem ipsum dolor sit amet. Magnam aliquam quaerat voluptatem sequi. Corporis suscipit laboriosam, nisi ut enim ipsam voluptatem quia. Velit esse, quam nihil impedit, quo voluptas nulla. Sint, obcaecati cupiditate non recusandae ipsam voluptatem, quia voluptas nulla vero. Officia deserunt mollitia animi, id est laborum et harum. Aperiam eaque ipsa, quae ab illo inventore veritatis et dolore magnam aliquam. Voluptas sit, amet, consectetur adipisci. Deleniti atque corrupti, quos dolores eos, qui dolorem ipsum.",[{id:0,title:"Баден Баден",countryId:5,text:t,price:5e3},{id:1,title:"Маунтин Вью",countryId:1,text:t,price:4e4},{id:2,title:"Байкал",countryId:0,text:t,price:8e3},{id:3,title:"Корфу",countryId:4,text:t,price:8e3},{id:4,title:"Коста Брава",countryId:2,text:t,price:90500}]},save:function(t){return localStorage.setItem("tours",angular.toJson(t))},load:function(){var t;return localStorage.getItem("tours")?t=angular.fromJson(localStorage.getItem("tours")):this.toursDefault()}}}])}.call(this),function(){angular.module("voyageVoyage").config(["$routeProvider","$locationProvider","$httpProvider",function(t,e,n){return t.when("/",{templateUrl:"app/tours/index.html",controller:"ToursController"}).when("/tour/:slug",{templateUrl:"app/tours/show.html",controller:"TourController"}).when("/admin",{templateUrl:"app/admin/tours/index.html",controller:"AdminToursController"}).when("/admin/countries",{templateUrl:"app/admin/countries/index.html",controller:"CountriesController"}).when("/admin/places",{templateUrl:"app/admin/places/index.html",controller:"PlacesController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0),n.defaults.headers.common={"X-Parse-Application-Id":"sXYBJKAzNLajxXs0SqkpjDmPKSY8eES5c4xOH275","X-Parse-REST-API-Key":"kqikw9hrrEcVjXzXYBl3CpWstA9RodV2tOoKqFa0"}}])}.call(this),angular.module("voyageVoyage").run(["$templateCache",function(t){t.put("app/tours/index.html",'<div class="row top-row"><div class="col-md-3 nopadding"><span class="logo">VoyageVoyage</span></div><div class="col-md-2 nopadding"><select id="" class="form-control" ng-model="selectedCountry" ng-options="country.name for country in countries" name=""><option value="">--Выберите страну--</option></select></div><div class="col-md-2 nopadding"><select id="" class="form-control" ng-model="selectedPlace" ng-options="place.name for place in places" name=""><option value="">--Выберите место--</option></select></div></div><div ng-repeat="tour in tours | filter: countryFilter | filter: placeFilter" class="entry"><div class="row"><div class="col-md-3 nopadding"><img src="" alt="" height="100" width="200"></div><div class="col-md-9"><div class="row"><div class="title col-md-4 nopadding"><a ng-href="/#/tour/{{ tour.objectId }}">{{tour.title}}</a><div class="label label-primary">{{getCountryById(tour.countryId)}}</div><span class="label label-success">{{getPlaceById(tour.placeId)}}</span></div><span class="price pull-right col-md-2 col-md-offset-6">{{tour.price | currency: "&#8381; " : 0}}</span></div><div class="row description">{{shortenText(tour.text)}} <a ng-href="/#/tour/{{ tour.objectId }}">далее</a></div></div></div></div>'),t.put("app/tours/show.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="row"><div class="col-md-3"><img src="" alt="" height="100" width="200"></div><div class="col-md-9"><h1>{{tour.title}}</h1><span class="label label-primary">{{ country.name }}</span> <span class="label label-success">{{ place.name }}</span><hr>{{tour.text}}</div></div>'),t.put("app/admin/countries/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()" ng-click="setState(\'add\')" href="">Создать</a> <input type="text" ng-model="state.country.name" ng-show="state.newFormShown()" placeholder="наименование"> <a class="btn btn-default pull-right" ng-show="state.newFormShown()" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="state.newFormShown()" ng-click="add()" href="">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="country in countries"><td><span ng-show="$index != state.editIndex">{{country.name}}</span> <input type="text" ng-model="state.country.name" ng-show="$index == state.editIndex" placeholder="наименование"></td><td><a href="" ng-click="remove($index)" ng-show="state.editRemoveShown()" class="action pull-right">Удалить</a> <a href="" ng-click="setState(\'edit\', $index, country)" ng-show="state.editRemoveShown()" class="action pull-right">Редактировать</a> <a class="btn btn-default pull-right" ng-show="$index == state.editIndex" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="$index == state.editIndex" ng-click="update()" href="">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/places/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()" ng-click="setState(\'add\')" href="">Создать</a> <input type="text" ng-model="state.place.name" ng-show="state.newFormShown()" placeholder="наименование"> <a class="btn btn-default pull-right" ng-show="state.newFormShown()" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="state.newFormShown()" ng-click="add()" href="">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="place in places"><td><span ng-show="$index != state.editIndex">{{place.name}}</span> <input type="text" ng-model="state.place.name" ng-show="$index == state.editIndex" placeholder="наименование"></td><td><a href="" ng-click="remove($index)" ng-show="state.editRemoveShown()" class="action pull-right">Удалить</a> <a href="" ng-click="setState(\'edit\', $index, place)" ng-show="state.editRemoveShown()" class="action pull-right">Редактировать</a> <a class="btn btn-default pull-right" ng-show="$index == state.editIndex" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="$index == state.editIndex" ng-click="update()" href="">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/tours/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage {{ title }}</span> <span ng-show="uiState.newButShown()"><a class="btn btn-default pull-right" ng-click="setState(\'new\')" href="">Add new</a></span></div><div class="row" ng-show="uiState.newFormShown()"><div class="col-md-8"><form class="form-horizontal"><div class="form-group"><label for="title">Заголовок</label> <input ng-model="tour.title" type="text" class="form-control" placeholder="Title"></div><div class="form-group"><label for="text">Описание</label> <textarea ng-model="tour.text" class="form-control" rows="3" placeholder="Description"></textarea></div><div class="form-group"><label for="country">Страна</label><select id="" class="form-control" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries" name=""><option value="">--Выберите страну--</option></select></div><div class="form-group"><label for="country">Место</label><select id="" class="form-control" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places" name=""><option value="">--Выберите место--</option></select></div><div class="form-group"><div class="col-sm-3 nopadding"><label for="price">Цена</label> <input ng-model="tour.price" class="form-control" type="number" placeholder="Price"></div></div><div class="form-group"><button ng-click="add()" class="btn btn-primary">Создать</button> <button ng-click="cancel()" class="btn btn-default">Отменить</button></div></form></div></div><div ng-show="uiState.listShown()" ng-repeat="tour in tours track by $index" class="entry"><div class="row"><div class="col-md-3"><img src="" alt="" height="100" width="200"></div><div class="col-md-9"><div class="row"><div class="title col-md-6 nopadding" ng-class="$index == uiState.editIndex ? \'col-md-3\' : \'col-md-6\'"><span ng-hide="$index == uiState.editIndex">{{tour.title}} <span ng-hide="$index == uiState.editIndex" class="label label-primary">{{getCountryById(tour.countryId)}}</span> <span ng-hide="$index == uiState.editIndex" class="label label-success">{{getPlaceById(tour.placeId)}}</span></span> <input ng-show="$index == uiState.editIndex" ng-model="tour.title" type="text" class="form-control" placeholder="Title"></div><div class="title col-md-3 nopadding"><select ng-show="$index == uiState.editIndex" id="" class="form-control" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries" name=""><option value="">--Выберите страну--</option></select></div><div class="title col-md-3 nopadding"><select ng-show="$index == uiState.editIndex" id="" class="form-control" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places" name=""><option value="">--Выберите место--</option></select></div><div class="price pull-right col-md-2 col-md-offset-4"><span ng-hide="$index == uiState.editIndex">{{tour.price | currency: "&#8381; " : 0}}</span> <input ng-show="$index == uiState.editIndex" ng-model="tour.price" class="form-control" type="number" placeholder="Price"></div></div><div class="row description"><span ng-hide="$index == uiState.editIndex">{{tour.text}}</span> <textarea ng-show="$index == uiState.editIndex" ng-model="tour.text" class="form-control" rows="3" placeholder="Description">\n        </textarea></div><div class="row"><a ng-hide="$index == uiState.editIndex" ng-click="setState(\'inlineEdit\', tour, $index)" href="" class="action pull-right">Edit</a> <a ng-hide="$index == uiState.editIndex" ng-click="remove($index)" href="" class="action pull-right">Remove</a><button ng-click="update()" ng-show="$index == uiState.editIndex" class="btn btn-primary">Сохранить</button> <button ng-click="cancel()" ng-show="$index == uiState.editIndex" class="btn btn-default">Отменить</button></div></div></div></div>')}]);