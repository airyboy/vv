(function(){angular.module("voyageVoyage",["ngRoute","ngResource","underscore","ngFileUpload"])}).call(this),function(){angular.module("voyageVoyage").directive("vvToursFilter",function(){return{restrict:"E",templateUrl:"app/shared/tours_filter/tours.filter.html",scope:{places:"=",countries:"=",selectedCountry:"=",selectedPlace:"=",selectedStars:"=",filterChangedCallback:"&filterChanged"},link:function(e,t,n){return e.stars=[{val:2},{val:3},{val:4},{val:5}],e.onFilterChanged=function(){return e.filterChangedCallback()},e.reset=function(){return e.selectedStars=null,e.selectedCountry=null,e.selectedPlace=null}}}})}.call(this),function(){angular.module("voyageVoyage").directive("vvPager",function(){return{restrict:"E",templateUrl:"app/shared/pager/pager.html",scope:{currentPage:"=",pageSize:"@",totalItems:"@",pageChangedCallback:"&pageChanged"},link:function(e,t,n){return e.$watch("totalItems",function(){var t;return e.totalPages=Math.ceil(e.totalItems/e.pageSize),e.pages=function(){t=[];for(var n=1,o=e.totalPages;o>=1?o>=n:n>=o;o>=1?n++:n--)t.push(n);return t}.apply(this)}),e.setPage=function(t){return e.currentPage=t,e.pageChangedCallback({page:t})},e.pageForward=function(){return e.currentPage!==e.pages.length&&++e.currentPage,e.pageChangedCallback({page:e.currentPage})},e.pageBackward=function(){return 1!==e.currentPage&&--e.currentPage,e.pageChangedCallback({page:e.currentPage})}}}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function o(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},n={}.hasOwnProperty;angular.module("voyageVoyage").factory("TourStateFactory",["Entity",function(n){var o,r,a,s,l;return o=function(){function e(){this.tour=null}return e.prototype.newFormShown=function(){return!1},e.prototype.listShown=function(){return!1},e.prototype.newButShown=function(){return!1},e.prototype.tour=null,e.prototype.editIndex=null,e.prototype.canCancel=function(){return!0},e}(),s=function(o){function r(){this.canCancel=e(this.canCancel,this),this.tour=new n}return t(r,o),r.prototype.newFormShown=function(){return!0},r.prototype.canCancel=function(){return this.tour.isEmpty()},r}(o),a=function(e){function n(e,t){this.tour=e,this.editIndex=t,this.tour.keepCopy()}return t(n,e),n.prototype.listShown=function(){return!0},n.prototype.canCancel=function(){return!this.tour.hasChanges()},n}(o),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.listShown=function(){return!0},n.prototype.newButShown=function(){return!0},n}(o),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.listShown=function(){return!0},n}(o),function(e,t,n){var o;return o=function(){switch(e){case"browse":return new r;case"new":return new s;case"inlineEdit":return new a(t,n)}}()}}])}.call(this),function(){angular.module("voyageVoyage").controller("AdminToursController",["$scope","$q","ImageUploadService","PersistenceService","TourStateFactory","FakerFactory","Entity","_",function(e,t,n,o,r,a,s,l){var i,c,u,d,p;return c="Есть несохраненные изменения. Продолжить?",i="Удалить тур?",p=function(e){return o.saveResource("tour",e)},d=function(e){return o.removeResource("tour",e)},u={tours:o.loadResource("tour").$promise,places:o.loadResource("place").$promise,countries:o.loadResource("country").$promise,hotels:o.loadResource("hotel").$promise},t.all(u).then(function(t){return e.tours=s.fromArray(t.tours),e.countries=t.countries,e.places=t.places,e.hotels=t.hotels})["catch"](function(e){return alert(e)}),e.setState=function(t,n,o){return e.state=new r(t,n,o),e.tour=e.state.tour},e.setState("browse"),e.add=function(){return e.tours.push(this.tour),p(this.tour),e.setState("browse")},e.update=function(){return e.tour.commitChanges(),p(this.tour),e.setState("browse")},e.cancel=function(){return e.state.canCancel()||confirm(c)?(e.tour.rejectChanges(),e.setState("browse")):void 0},e.remove=function(t){return confirm(i)?(e.tours.splice(t,1),d(this.tour)):void 0},e.upload=function(t){return n.uploadImage(t,e.tour)},e.seedDb=function(){var t,n,r,l;return t=s.fromArray(a.countries),angular.forEach(t,function(e){return o.saveResource("country",e)}),r=s.fromArray(a.places(e.countries)),angular.forEach(r,function(e){return o.saveResource("place",e)}),n=s.fromArray(a.hotels),angular.forEach(n,function(e){return o.saveResource("hotel",e)}),l=s.fromArray(a.tours(20,{countries:e.countries,places:e.places,hotels:e.hotels})),angular.forEach(l,function(e){return console.log(e),o.saveResource("tour",e)}),alert("Seed finished")},e.getCountryById=function(t){var n;return n=l.find(e.countries,function(e){return e.objectId===t}),l.result(n,"name","n/a")},e.getPlaceById=function(t){var n;return n=l.find(e.places,function(e){return e.objectId===t}),l.result(n,"name","n/a")},e.getHotelById=function(t){var n;return n=l.find(e.hotels,function(e){return e.objectId===t})}}])}.call(this),function(){angular.module("voyageVoyage").controller("PlacesController",["$scope","$q","PersistenceService","SimpleStateFactory","Entity",function(e,t,n,o,r){var a;return e.setState=function(t,n,r){return e.state=new o("place",t,r,n)},a={places:n.loadResource("place").$promise,countries:n.loadResource("country").$promise},t.all(a).then(function(t){return e.places=r.fromArray(t.places),e.countries=t.countries,e.setState("browse")}),e.add=function(){return CRUDService.add("place",e.state.place,e.places,e.setState)},e.update=function(){return CRUDService.update("place",e.state.place,e.setState)},e.cancelEdit=function(){return CRUDService.cancelEdit(e.state.place,e.setState)},e.remove=function(t){return confirm("Удалить?")?CRUDService.remove("place",t,e.places):void 0},e.getCountryById=function(t){var n;return n=_.find(e.countries,function(e){return e.objectId===t}),n.name}}])}.call(this),function(){angular.module("voyageVoyage").controller("HotelsController",["$scope","PersistenceService","Entity","SimpleStateFactory","CRUDService",function(e,t,n,o,r){return t.loadResource("hotel").$promise.then(function(t){return e.hotels=n.fromArray(t)}),e.setState=function(t,n,r){return e.state=new o("hotel",t,r,n)},e.state=e.setState("browse"),e.add=function(){return r.add("hotel",e.state.hotel,e.hotels,e.setState)},e.update=function(){return r.update("hotel",e.state.hotel,e.setState)},e.cancelEdit=function(){return r.cancelEdit(e.state.hotel,e.setState)},e.remove=function(t){return confirm("Удалить?")?r.remove("hotel",t,e.countries):void 0}}])}.call(this),function(){angular.module("voyageVoyage").controller("CountriesController",["$scope","PersistenceService","Entity","SimpleStateFactory","CRUDService","ImageUploadService",function(e,t,n,o,r,a){return e.file=null,e.setState=function(t,n,r){return e.state=new o("country",t,r,n)},t.loadResource("country").$promise.then(function(t){return e.countries=n.fromArray(t),e.setState("browse")}),e.add=function(){return r.add("country",e.state.country,e.countries,e.setState)},e.update=function(){return r.update("country",e.state.country,e.setState)},e.cancelEdit=function(){return r.cancelEdit(e.state.country,e.setState)},e.remove=function(t){return confirm("Удалить?")?r.remove("country",t,e.countries):void 0},e.upload=function(t){return a.uploadImage(t,e.state.country)}}])}.call(this),function(){angular.module("voyageVoyage").controller("ToursController",["$scope","$q","PersistenceService","Entity","_","ToursFilterService",function(e,t,n,o,r,a){var s,l;return s=[],e.itemsOnPage=4,l={tours:n.loadResource("tour").$promise,places:n.loadResource("place").$promise,countries:n.loadResource("country").$promise,hotels:n.loadResource("hotel").$promise},t.all(l).then(function(t){return e.countries=t.countries,e.hotels=t.hotels,e.tours=t.tours,e.places=t.places,e.setPage(1)}),e.countryFilter=function(t){return a.countryFilter(t,e.selectedCountry)},e.placeFilter=function(t){return a.placeFilter(t,e.selectedPlace)},e.starsFilter=function(t){return a.starsFilter(t,e.hotels,e.selectedStars)},e.filterChanged=function(){return e.pageBeginIndex=0,e.currentPage=1},e.setPage=function(t){return e.currentPage=t,e.pageBeginIndex=e.itemsOnPage*(t-1)},e.getCountryById=function(t){var n;return n=r.find(e.countries,function(e){return e.objectId===t}),r.result(n,"name","n/a")},e.getPlaceById=function(t){var n;return n=r.find(e.places,function(e){return e.objectId===t}),r.result(n,"name","n/a")},e.getHotelById=function(t){var n;return n=r.find(e.hotels,function(e){return e.objectId===t})}}])}.call(this),function(){angular.module("voyageVoyage").controller("TourController",["$scope","$routeParams","$q","PersistenceService","_",function(e,t,n,o,r){var a;return a=function(e,t,r){return n.all({country:o.loadResourceById("country",e).$promise,place:o.loadResourceById("place",r).$promise,hotel:o.loadResourceById("hotel",t).$promise})},o.loadResourceById("tour",t.slug).$promise.then(function(t){return a(t.countryId,t.hotelId,t.placeId).then(function(n){return e.country=n.country,e.hotel=n.hotel,e.place=n.place,e.tour=t})})["catch"](function(e){return console.log(e)})}])}.call(this),function(){angular.module("voyageVoyage").service("ToursFilterService",["_",function(e){return{countryFilter:function(e,t){return t?e.countryId===t.objectId:!0},placeFilter:function(e,t){return t?e.placeId===t.objectId:!0},starsFilter:function(t,n,o){var r;return o?(r=e.find(n,function(e){return e.objectId===t.hotelId}),r.stars===o.val):!0}}}])}.call(this),function(){var e=function(e,n){function o(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},t={}.hasOwnProperty;angular.module("voyageVoyage").factory("SimpleStateFactory",["Entity",function(t){var n,o,r,a;return n=function(){function e(e){this[e]=null}return e.prototype.newButShown=function(){return!1},e.prototype.newButDisabled=function(){return!1},e.prototype.newFormShown=function(){return!1},e.prototype.editRemoveShown=function(){return!1},e.prototype.editIndex=null,e}(),o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.newButShown=function(){return!0},n.prototype.editRemoveShown=function(){return!0},n}(n),a=function(n){function o(e){this[e]=new t}return e(o,n),o.prototype.newFormShown=function(){return!0},o}(n),r=function(t){function n(e,t,n){this.editIndex=n,this[e]=t,this[e].keepCopy()}return e(n,t),n.prototype.newButDisabled=function(){return!0},n.prototype.newButShown=function(){return!0},n}(n),function(e,t,n,s){var l;return l=function(){switch(t){case"browse":return new o(e);case"add":return new a(e);case"edit":return new r(e,n,s)}}()}}])}.call(this),function(){angular.module("voyageVoyage").factory("ResourceFactory",["$resource",function(e){return function(t){var n;return n=e("https://api.parse.com/1/classes/"+t+"/:objectId",{objectId:"@objectId"},{query:{isArray:!0,transformResponse:function(e,t){return angular.fromJson(e).results},cache:!0},update:{method:"PUT"},getById:{method:"GET",isArray:!1}})}}])}.call(this),function(){angular.module("voyageVoyage").service("PersistenceService",["$resource","$q","ResourceFactory","$log",function(e,t,n,o){return{loadResourceById:function(e,t){return n(e).getById({objectId:t})},loadResource:function(e){return n(e).query()},saveResource:function(e,t){var r,a;return a=n(e),r=new a(t),t.objectId?r.$update().then(function(e){return t.commitChanges()})["catch"](function(e){return o.error(e),alert("Error!")}):r.$save().then(function(e){return t.objectId=e.objectId})["catch"](function(e){return o.error(e),alert("Error!")})},removeResource:function(e,t){var r,a;return a=n(e),r=new a({objectId:t.objectId}),r.$remove()["catch"](function(e){return o.error(e),alert("Error!")})}}}])}.call(this),function(){angular.module("voyageVoyage").service("ImageUploadService",["Upload",function(e){return{uploadImage:function(t,n){var o;return o=e.http({url:"https://api.parse.com/1/files/pic.jpg",headers:{"Content-Type":"image/jpeg"},data:t}),o.then(function(e){return n.image={__type:"File",name:e.data.name,url:e.data.url}})["catch"](function(e){return alert("Error!"),console.log(e)})}}}])}.call(this),function(){angular.module("voyageVoyage").factory("FakerFactory",function(){var e,t,n,o,r,a,s;return e=function(){this.country="Аргентина,Бразилия,Франция,Чехия,Корея,Япония,Швейцария,Колумбия,Ботсвана,Германия",this.adjective="Чарующая,Невероятная,Пугающая,Искрящаяся,Обычная,Скучная,Веселая,Зимняя,Летняя",this.place="beach,mountains,trekking,city",this.duration="3,5,7,10,14,21",this.hotel="Four Seasons,Hyatt,Radisson,Kempinski,Marriot,Mandarin Oriental,Hilton",this.star="2,3,4,5",this.text=["The LORD is my shepherd; I shall not want.He makes me lie down in green pastures.  He leads me beside still waters.  He restores my soul.  He leads me in paths of righteousness for his name’s sake. Even though I walk through the valley of the shadow of death, I will fear no evil, for you are with me; your rod and your staff, they comfort me. You prepare a table before me in the presence of my enemies; you anoint my head with oil; my cup overflows.  Surelyd goodness and mercye shall follow me all the days of my life, and I shall dwellf in the house of the LORD forever.","Каледонская складчатость просветляет холодный рельеф. Нижнее течение непосредственно применяет бамбук. Очаг многовекового орошаемого земледелия оформляет памятник Средневековья, а также необходима справка о прививке против бешенства и результаты анализа на бешенство через 120 дней и за 30 дней до отъезда. В турецких банях не принято купаться раздетыми, поэтому из полотенца сооружают юбочку, а макрель вразнобой вызывает бальнеоклиматический курорт. Пейзажный парк берёт туристический коралловый риф. Здесь работали Карл Маркс и Владимир Ленин, но Тасмания вызывает официальный язык.","Тюлень теоретически возможен. Восточно-Африканское плоскогорье, несмотря на то, что есть много бунгало для проживания, мгновенно. Субэкваториальный климат, несмотря на внешние воздействия, изменяем.","Кампос-серрадос, несмотря на то, что есть много бунгало для проживания, жизненно поднимает попугай. Рекомендуется совершить прогулку на лодке по каналам города и Озеру Любви, однако не надо забывать, что материк применяет черный эль, здесь есть много ценных пород деревьев, таких как железное, красное, коричневое (лим), черное (гу), сандаловое деревья, бамбуки и другие виды. Волна пространственно связывает туристический ледостав.","Акцентируется не красота садовой дорожки, а Южное полушарие входит городской пейзажный парк. Бельгия, в первом приближении, представляет собой утконос, для этого необходим заграничный паспорт, действительный в течение трех месяцев с момента завершения поездки со свободной страницей для визы. Альбатрос просветляет языковой Бахрейн. Портер применяет рельеф. Восточно-Африканское плоскогорье, как бы это ни казалось парадоксальным, берёт экскурсионный полярный круг. Бурное развитие внутреннего туризма привело Томаса Кука к необходимости организовать поездки за границу, при этом мохово-лишайниковая растительность применяет двухпалатный парламент.","Провоз кошек и собак прекрасно иллюстрирует гидроузел. Селитра поднимает глубокий утконос. Наводнение погранично. Большое Медвежье озеро начинает Карибский бассейн. Для пользования телефоном-автоматом необходимы разменные монеты, однако оазисное земледелие вызывает парк Варошлигет. Санитарный и ветеринарный контроль входит растительный покров, в этот день в меню - щи из морепродуктов в кокосовой скорлупе.",'Великобритания, несмотря на внешние воздействия, параллельна. Здесь работали Карл Маркс и Владимир Ленин, но озеро Ньяса связывает крестьянский ураган, например, "вентилятор" обозначает "веер-ветер", "спичка" - "палочка-чирк-огонь". Винный фестиваль проходит в приусадебном музее Георгикон, там же черный эль сложен. Гвианский щит, несмотря на внешние воздействия, жизненно выбирает различный пингвин, но особой популярностью пользуются заведения подобного рода, сосредоточенные в районе Центральной площади и железнодорожного вокзала.']},a=function(e){var t;return t=Math.floor(Math.random()*e.length),e[t]},t=function(){var t;return t=new e,t.country.split(",").map(function(e){return{name:e}})},r=function(t){var n,o;return n=new e,o=[],angular.forEach(t,function(e){return n.place.split(",").forEach(function(t){return o.push({name:t,countryId:e.objectId,countryName:e.name})})}),o},o=function(){var t;return t=new e,t.hotel.split(",").map(function(e){return{stars:+a(t.star.split(",")),name:e}})},s=function(t,n){var o,r,s,l,i,c,u,d,p,h,g;for(s=new e,g=[],c=i=0,p=t-1;p>=0?p>=i:i>=p;c=p>=0?++i:--i)r=a(n.countries),u=a(n.places),l=a(n.hotels),o=a(s.adjective.split(",")),h=o+" "+r.name,d=1e4*(Math.floor(15*Math.random())+5)-100,g.push({title:h,text:a(s.text),placeId:u.objectId,countryId:r.objectId,hotelId:l.objectId,duration:+a(s.duration.split(",")),price:d});return g},new(n=function(){this.countries=new t,this.hotels=new o,this.places=r,this.tours=s})})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("voyageVoyage").factory("Entity",function(){var t;return t=function(){function t(t){this.name=t,this.hasChanges=e(this.hasChanges,this)}var n;return n=null,t.prototype.keepCopy=function(){return n=t.fromJSON(this)},t.fromJSON=function(e){var n;return n=new t,angular.extend(n,e)},t.prototype.commitChanges=function(){return n=null},t.prototype.rejectChanges=function(){var e,t;for(e in n)t=n[e],"function"!=typeof n[e]&&(this[e]=n[e]);return n=null},t.prototype.hasChanges=function(){return!this.isEqual(n)},t.prototype.isEmpty=function(){return _.chain(_.keys(this)).filter(function(e){return"function"!=typeof this[e]},this).reduce(function(e,t){return e&!this[t]},!0,this).value()},t.prototype.isEqual=function(e){return _.chain(_.keys(this)).filter(function(e){return"function"!=typeof this[e]},this).reduce(function(t,n){return t&this[n]===e[n]},!0,this).value()},t.fromArray=function(e){var n,o;return o=function(){var o,r,a;for(a=[],o=0,r=e.length;r>o;o++)n=e[o],a.push(t.fromJSON(n));return a}()},t}()})}.call(this),function(){angular.module("voyageVoyage").service("CRUDService",["PersistenceService","$log",function(e,t){return{add:function(t,n,o,r){return e.saveResource(t,n),o.push(n),r("browse")},remove:function(t,n,o){var r;return r=o[n],e.removeResource(t,r),o.splice(n,1)},update:function(t,n,o){return e.saveResource(t,n),o("browse")},cancelEdit:function(e,t){return e.rejectChanges(),t("browse")}}}])}.call(this),function(){angular.module("voyageVoyage").config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,n){return e.when("/",{templateUrl:"app/tours/index.html",controller:"ToursController"}).when("/tour/:slug",{templateUrl:"app/tours/show.html",controller:"TourController"}).when("/admin",{templateUrl:"app/admin/tours/index.html",controller:"AdminToursController"}).when("/admin/countries",{templateUrl:"app/admin/countries/index.html",controller:"CountriesController"}).when("/admin/places",{templateUrl:"app/admin/places/index.html",controller:"PlacesController"}).when("/admin/hotels",{templateUrl:"app/admin/hotels/index.html",controller:"HotelsController"}).otherwise({redirectTo:"/"}),t.html5Mode(!0),n.defaults.headers.common={"X-Parse-Application-Id":"sXYBJKAzNLajxXs0SqkpjDmPKSY8eES5c4xOH275","X-Parse-REST-API-Key":"kqikw9hrrEcVjXzXYBl3CpWstA9RodV2tOoKqFa0"}}])}.call(this),angular.module("voyageVoyage").run(["$templateCache",function(e){e.put("app/shared/logo.html",'<div class="col-md-3"><span class="logo"><a href="/">VoyageVoyage</a></span></div>'),e.put("app/tours/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include><vv-tours-filter countries="countries" filter-changed="filterChanged()" places="places" selected-country="selectedCountry" selected-place="selectedPlace" selected-stars="selectedStars"></vv-tours-filter></div><div class="nopadding"><vv-pager current-page="currentPage" page-changed="setPage(page)" page-size="{{ itemsOnPage }}" total-items="{{ (tours | filter: countryFilter | filter: placeFilter | filter: starsFilter).length }}"></vv-pager></div><div class="entry" ng-repeat="tour in tours | filter: countryFilter | filter: placeFilter | filter: starsFilter | limitTo: itemsOnPage: pageBeginIndex track by tour.objectId"><div class="row item user"><div class="col-md-3"><div class="image"><img alt="" height="130" ng-src="{{ tour.image.url }}" src="" width="230"></div></div><div class="col-md-9"><div class="row"><div class="title col-md-7 nopadding"><a ng-href="/#/tour/{{ tour.objectId }}">{{tour.title}}</a><div class="label label-primary">{{ getCountryById(tour.countryId)}}</div><span class="label label-success">{{ getPlaceById(tour.placeId)}}</span><span class="label label-info">{{ tour.duration + \' ночей\' }}</span></div><span class="price pull-right col-md-2">{{tour.price | currency: "₽ " : 0}}</span></div><div class="row hotel nopadding"><span ng-hide="$index == state.editIndex">{{ getHotelById(tour.hotelId).name }} &nbsp;{{ getHotelById(tour.hotelId).stars }}*</span></div><div class="row description">{{tour.text | limitTo:350}}...<a ng-href="/#/tour/{{ tour.objectId }}">далее</a></div></div></div></div>'),e.put("app/tours/show.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="row"><div class="col-md-3"><img alt="" height="130" ng-src="{{ tour.image.url }}" src="" width="230"></div><div class="col-md-9"><h1>{{ tour.title }}</h1><h3>{{ hotel.stars + \'*\' }} {{ hotel.name }}</h3><span class="label label-primary">{{ country.name }}</span><span class="label label-success">{{ place.name }}</span><hr>{{tour.text}}</div></div>'),e.put("app/admin/countries/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="row box"><div class="col-md-6"><div class="row action"><a class="btn btn-primary" href="" ng-click="setState(&#39;add&#39;)" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()">Создать</a><input ng-model="state.country.name" ng-show="state.newFormShown()" placeholder="наименование" type="text"><button ng-show="state.newFormShown()" ngf-select="upload($file)">Set image</button><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="state.newFormShown()">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="add()" ng-show="state.newFormShown()">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="country in countries"><td><img height="20" ng-src="{{ country.image.url }}"></td><td><span ng-show="$index != state.editIndex">{{country.name}}</span><input ng-model="state.country.name" ng-show="$index == state.editIndex" placeholder="наименование" type="text"><button ng-show="$index == state.editIndex" ngf-select="upload($file)">Set image</button></td><td><a class="action pull-right" href="" ng-click="remove($index)" ng-show="state.editRemoveShown()">Удалить</a><a class="action pull-right" href="" ng-click="setState(&#39;edit&#39;, $index, country)" ng-show="state.editRemoveShown()">Редактировать</a><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="$index == state.editIndex">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</a></td></tr></tbody></table></div></div>'),e.put("app/admin/hotels/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="row box"><div class="col-md-6"><div class="row action"><a class="btn btn-primary" href="" ng-click="setState(&#39;add&#39;)" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()">Создать</a><input ng-model="state.hotel.name" ng-show="state.newFormShown()" placeholder="наименование" type="text"><input max="5" min="0" ng-model="state.hotel.stars" ng-show="state.newFormShown()" type="number"><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="state.newFormShown()">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="add()" ng-show="state.newFormShown()">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="hotel in hotels"><td><span ng-show="$index != state.editIndex">{{hotel.name}}</span><input ng-model="state.hotel.name" ng-show="$index == state.editIndex" placeholder="наименование" type="text"></td><td><span ng-show="$index != state.editIndex">{{hotel.stars}}*</span><input max="5" min="0" ng-model="state.hotel.stars" ng-show="$index == state.editIndex" type="number"></td><td><a class="action pull-right" href="" ng-click="remove($index)" ng-show="state.editRemoveShown()">Удалить</a><a class="action pull-right" href="" ng-click="setState(&#39;edit&#39;, $index, hotel)" ng-show="state.editRemoveShown()">Редактировать</a><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="$index == state.editIndex">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</a></td></tr></tbody></table></div></div>'),e.put("app/admin/places/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="row box"><div class="col-md-6"><div class="row action"><a class="btn btn-primary" href="" ng-click="setState(&#39;add&#39;)" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()">Создать</a><input ng-model="state.place.name" ng-show="state.newFormShown()" placeholder="наименование" type="text"><select class="form-control" ng-model="state.place.countryId" ng-options="country.objectId as country.name for country in countries" ng-show="state.newFormShown()"></select><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="state.newFormShown()">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="add()" ng-show="state.newFormShown()">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="place in places"><td><span ng-show="$index != state.editIndex">{{place.name}}</span><input ng-model="state.place.name" ng-show="$index == state.editIndex" placeholder="наименование" type="text"></td><td><span ng-show="$index != state.editIndex">{{ getCountryById(place.countryId) }}</span><select class="form-control" ng-model="state.place.countryId" ng-options="country.objectId as country.name for country in countries" ng-show="$index == state.editIndex"></select></td><td><a class="action pull-right" href="" ng-click="remove($index)" ng-show="state.editRemoveShown()">Удалить</a><a class="action pull-right" href="" ng-click="setState(&#39;edit&#39;, $index, place)" ng-show="state.editRemoveShown()">Редактировать</a><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="$index == state.editIndex">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</a></td></tr></tbody></table></div></div>'),e.put("app/admin/tours/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include><div class="col-md-3 col-md-offset-6"><span ng-show="state.newButShown()"><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;new&#39;)">Add new</a></span></div></div><div class="row box" ng-show="state.newFormShown()"><div class="col-md-8"><form class="form-horizontal"><div class="form-group"><label for="title">Заголовок</label><input class="form-control" ng-model="tour.title" placeholder="Title" type="text"></div><div class="form-group"><label for="text">Описание</label><textarea class="form-control" ng-model="tour.text" placeholder="Description" rows="3"></textarea></div><div class="form-group"><label for="country">Продолжительность</label><input class="form-control" min="1" ng-model="tour.duration" placeholder="Duration" type="number"></div><div class="form-group"><label for="country">Страна</label><select class="form-control" id="" name="" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries"><option value="">--Выберите страну--</option></select></div><div class="form-group"><label for="country">Место</label><select class="form-control" id="" name="" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places"><option value="">--Выберите место--</option></select></div><div class="form-group"><label for="country">Отель</label><select class="form-control" id="" name="" ng-model="tour.hotelId" ng-options="hotel.objectId as hotel.name for hotel in hotels"><option value="">--Выберите отель--</option></select></div><div class="form-group"><div class="col-sm-3 nopadding"><label for="price">Цена</label><input class="form-control" ng-model="tour.price" placeholder="Price" type="number"></div></div><div class="form-group"><div class="col-sm-3 nopadding"><button ng-show="state.newFormShown()" ngf-select="upload($file)">Set image</button></div></div><div class="form-group"><button class="btn btn-primary" ng-click="add()">Создать</button><button class="btn btn-default" ng-click="cancel()">Отменить</button></div></form></div></div><div class="entry" ng-repeat="tour in tours track by $index" ng-show="state.listShown()"><div class="row item"><div class="col-md-3"><div class="img"><img alt="" height="130" ng-src="{{ tour.image.url }}" src="" width="230"><button ng-show="$index == state.editIndex" ngf-select="upload($file)">Set image</button></div></div><div class="col-md-9"><div class="row title"><span ng-hide="$index == state.editIndex">{{tour.title}}</span></div><div class="row"><div class="title col-md-6 nopadding" ng-class="$index == state.editIndex ? &#39;col-md-3&#39; : &#39;col-md-6&#39;"><span class="label label-primary" ng-hide="$index == state.editIndex">{{ getCountryById(tour.countryId) }}</span><span class="label label-success" ng-hide="$index == state.editIndex">{{ getPlaceById(tour.placeId) }}</span><span class="label label-info" ng-hide="$index == state.editIndex">{{ tour.duration + \' ночей\' }}</span><input class="form-control" ng-model="tour.title" ng-show="$index == state.editIndex" placeholder="Title" type="text"></div><div class="title col-md-2 nopadding"><select class="form-control" id="" name="" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries" ng-show="$index == state.editIndex"><option value="">--Выберите страну--</option></select></div><div class="title col-md-2 nopadding"><select class="form-control" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places" ng-show="$index == state.editIndex"><option value="">--Выберите место--</option></select></div><div class="title col-md-2 nopadding"><input class="form-control" min="1" ng-model="tour.duration" ng-show="$index == state.editIndex" placeholder="Duration" type="number"></div><div class="price pull-right col-md-2"><span ng-hide="$index == state.editIndex">{{tour.price | currency: "₽ " : 0}}</span><input class="form-control" ng-model="tour.price" ng-show="$index == state.editIndex" placeholder="Price" type="number"></div></div><div class="row hotel"><span ng-hide="$index == state.editIndex">{{ getHotelById(tour.hotelId).stars }}*{{ getHotelById(tour.hotelId).name }}</span><select class="form-control" ng-model="tour.hotelId" ng-options="hotel.objectId as hotel.name for hotel in hotels" ng-show="$index == state.editIndex"><option value="">Выберите отель</option></select></div><div class="row description"><span ng-hide="$index == state.editIndex">{{tour.text}}</span><textarea class="form-control" ng-model="tour.text" ng-show="$index == state.editIndex" placeholder="Description" rows="3"></textarea></div><div class="row"><a class="action pull-right" href="" ng-click="setState(&#39;inlineEdit&#39;, tour, $index)" ng-hide="$index == state.editIndex">Edit</a><a class="action pull-right" href="" ng-click="remove($index)" ng-hide="$index == state.editIndex">Remove</a><button class="btn btn-primary" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</button><button class="btn btn-default" ng-click="cancel()" ng-show="$index == state.editIndex">Отменить</button></div></div></div></div><div class="row"><a class="btn btn-default" href="" ng-click="seedDb()" style="display: none">Seed DB</a></div>'),
e.put("app/shared/pager/pager.html",'<nav ng-class="{hidden: totalPages &lt; 2}"><ul class="pagination"><li ng-class="{disabled: currentPage == 1}" ng-if="pages.length &gt; 2"><a href="#" ng-click="setPage(1)"><span>&laquo;</span></a></li><li ng-class="{disabled: currentPage == 1}"><a href="#" ng-click="pageBackward()"><span>&larr; Prev</span></a></li><li ng-class="{active: page == currentPage}" ng-repeat="page in pages track by $index"><a href="#" ng-click="setPage(page)">{{ page }}</a></li><li ng-class="{disabled: currentPage == pages.length}"><a href="#" ng-click="pageForward()"><span>Next &rarr;</span></a></li><li ng-class="{disabled: currentPage == pages.length}" ng-if="pages.length &gt; 2"><a href="#" ng-click="setPage(pages.length)"><span>&raquo;</span></a></li></ul></nav>'),e.put("app/shared/tours_filter/tours.filter.html",'<div class="col-md-2"><select class="form-control" id="" ng-change="onFilterChanged()" ng-model="selectedCountry" ng-options="country.name for country in countries track by country.objectId"><option value="">--Выберите страну--</option></select></div><div class="col-md-2"><select class="form-control" id="" name="" ng-change="onFilterChanged()" ng-model="selectedPlace" ng-options="place.name for place in places | filter: {countryId: selectedCountry.objectId} track by place.objectId"><option value="">--Выберите место--</option></select></div><div class="col-md-2"><select class="form-control" id="" name="" ng-change="onFilterChanged()" ng-model="selectedStars" ng-options="item.val for item in stars"><option value="">--Звезды --</option></select></div><a class="btn btn-danger" ng-click="reset()" ng-show="selectedStars || selectedPlace || selectedCountry">Сброс</a>')}]);