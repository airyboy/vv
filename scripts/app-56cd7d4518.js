(function(){angular.module("voyageVoyage",["ngRoute","ngResource","underscore","ngFileUpload"])}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;angular.module("voyageVoyage").factory("TourStateFactory",["Entity",function(n){var o,r,a,s,i;return o=function(){function t(){this.tour=null}return t.prototype.newFormShown=function(){return!1},t.prototype.listShown=function(){return!1},t.prototype.newButShown=function(){return!1},t.prototype.tour=null,t.prototype.editIndex=null,t.prototype.canCancel=function(){return!0},t}(),s=function(o){function r(){this.canCancel=t(this.canCancel,this),this.tour=new n}return e(r,o),r.prototype.newFormShown=function(){return!0},r.prototype.canCancel=function(){return this.tour.isEmpty()},r}(o),a=function(t){function n(t,e){this.tour=t,this.editIndex=e,this.tour.keepCopy()}return e(n,t),n.prototype.listShown=function(){return!0},n.prototype.canCancel=function(){return!this.tour.hasChanges()},n}(o),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.listShown=function(){return!0},n.prototype.newButShown=function(){return!0},n}(o),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.listShown=function(){return!0},n}(o),function(t,e,n){var o;return o=function(){switch(t){case"browse":return new r;case"new":return new s;case"inlineEdit":return new a(e,n)}}()}}])}.call(this),function(){angular.module("voyageVoyage").controller("AdminToursController",["$scope","$q","ImageUploadService","PersistenceService","TourStateFactory","Entity","_",function(t,e,n,o,r,a,s){var i,l,c,u,d;return l="Есть несохраненные изменения. Продолжить?",i="Удалить тур?",d=function(t){return o.saveResource("tour",t)},u=function(t){return o.removeResource("tour",t)},c={tours:o.loadResource("tour").$promise,places:o.loadResource("place").$promise,countries:o.loadResource("country").$promise,hotels:o.loadResource("hotel").$promise},e.all(c).then(function(e){return t.tours=a.fromArray(e.tours),t.countries=e.countries,t.places=e.places,t.hotels=e.hotels})["catch"](function(t){return alert(t)}),t.setState=function(e,n,o){return t.state=new r(e,n,o),t.tour=t.state.tour},t.setState("browse"),t.add=function(){return t.tours.push(this.tour),d(this.tour),t.setState("browse")},t.update=function(){return t.tour.commitChanges(),d(this.tour),t.setState("browse")},t.cancel=function(){return t.state.canCancel()||confirm(l)?(t.tour.rejectChanges(),t.setState("browse")):void 0},t.remove=function(e){return confirm(i)?(t.tours.splice(e,1),u(this.tour)):void 0},t.upload=function(e){return n.uploadImage(e,t.tour)},t.getCountryById=function(e){var n;return n=s.find(t.countries,function(t){return t.objectId===e}),s.result(n,"name","n/a")},t.getPlaceById=function(e){var n;return n=s.find(t.places,function(t){return t.objectId===e}),s.result(n,"name","n/a")},t.getHotelById=function(e){var n;return n=s.find(t.hotels,function(t){return t.objectId===e})}}])}.call(this),function(){angular.module("voyageVoyage").controller("PlacesController",["$scope","$q","PersistenceService","SimpleStateFactory","Entity",function(t,e,n,o,r){var a;return t.setState=function(e,n,r){return t.state=new o("place",e,r,n)},a={places:n.loadResource("place").$promise,countries:n.loadResource("country").$promise},e.all(a).then(function(e){return t.places=r.fromArray(e.places),t.countries=e.countries,t.setState("browse")}),t.add=function(){return CRUDService.add("place",t.state.place,t.places,t.setState)},t.update=function(){return CRUDService.update("place",t.state.place,t.setState)},t.cancelEdit=function(){return CRUDService.cancelEdit(t.state.place,t.setState)},t.remove=function(e){return confirm("Удалить?")?CRUDService.remove("place",e,t.places):void 0},t.getCountryById=function(e){var n;return n=_.find(t.countries,function(t){return t.objectId===e}),n.name}}])}.call(this),function(){angular.module("voyageVoyage").controller("HotelsController",["$scope","PersistenceService","Entity","SimpleStateFactory","CRUDService",function(t,e,n,o,r){return e.loadResource("hotel").$promise.then(function(e){return t.hotels=n.fromArray(e)}),t.setState=function(e,n,r){return t.state=new o("hotel",e,r,n)},t.state=t.setState("browse"),t.add=function(){return r.add("hotel",t.state.hotel,t.hotels,t.setState)},t.update=function(){return r.update("hotel",t.state.hotel,t.setState)},t.cancelEdit=function(){return r.cancelEdit(t.state.hotel,t.setState)},t.remove=function(e){return confirm("Удалить?")?r.remove("hotel",e,t.countries):void 0}}])}.call(this),function(){angular.module("voyageVoyage").controller("CountriesController",["$scope","PersistenceService","Entity","SimpleStateFactory","CRUDService","ImageUploadService",function(t,e,n,o,r,a){return t.file=null,t.setState=function(e,n,r){return t.state=new o("country",e,r,n)},e.loadResource("country").$promise.then(function(e){return t.countries=n.fromArray(e),t.setState("browse"),console.log(t.countries)}),t.add=function(){return r.add("country",t.state.country,t.countries,t.setState)},t.update=function(){return r.update("country",t.state.country,t.setState)},t.cancelEdit=function(){return r.cancelEdit(t.state.country,t.setState)},t.remove=function(e){return confirm("Удалить?")?r.remove("country",e,t.countries):void 0},t.upload=function(e){return a.uploadImage(e,t.state.country)}}])}.call(this),function(){angular.module("voyageVoyage").controller("ToursController",["$scope","$q","PersistenceService","Entity","_","ToursFilterService",function(t,e,n,o,r,a){var s,i,l,c,u,d;return u=function(){return n.loadResource("place").$promise},l=function(){return n.loadResource("country").$promise},c=function(){return n.loadResource("hotel").$promise},i=function(){return n.loadResource("tour").$promise},s=[],d={tours:i(),places:u(),countries:l(),hotels:c()},e.all(d).then(function(e){return t.tours=e.tours,t.countries=e.countries,t.hotels=e.hotels,s=e.places,t.places=s}),t.countryFilter=function(e){return a.countryFilter(e,t.selectedCountry)},t.placeFilter=function(e){return a.placeFilter(e,t.selectedPlace)},t.updatePlaceList=function(){return t.places=a.placesFilteredByCountry(s,t.selectedCountry)},t.shortenText=function(t){return t.substring(0,350)+"... "},t.getCountryById=function(e){var n;return n=r.find(t.countries,function(t){return t.objectId===e}),r.result(n,"name","n/a")},t.getPlaceById=function(e){var n;return n=r.find(t.places,function(t){return t.objectId===e}),r.result(n,"name","n/a")},t.getHotelById=function(e){var n;return n=r.find(t.hotels,function(t){return t.objectId===e})}}])}.call(this),function(){angular.module("voyageVoyage").controller("TourController",["$scope","$routeParams","$q","PersistenceService","_",function(t,e,n,o,r){var a;return a=function(t,e,r){return n.all({country:o.loadResourceById("country",t).$promise,place:o.loadResourceById("place",r).$promise,hotel:o.loadResourceById("hotel",e).$promise})},o.loadResourceById("tour",e.slug).$promise.then(function(e){return a(e.countryId,e.hotelId,e.placeId).then(function(n){return t.country=n.country,t.hotel=n.hotel,t.place=n.place,t.tour=e})})["catch"](function(t){return console.log(t)})}])}.call(this),function(){angular.module("voyageVoyage").service("ToursFilterService",function(){return{countryFilter:function(t,e){return e?t.countryId===e.objectId:!0},placeFilter:function(t,e){return e?t.placeId===e.objectId:!0},placesFilteredByCountry:function(t,e){return e?_.where(t,{countryId:e.objectId}):t}}})}.call(this),function(){var t=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},e={}.hasOwnProperty;angular.module("voyageVoyage").factory("SimpleStateFactory",["Entity",function(e){var n,o,r,a;return n=function(){function t(t){this[t]=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.newButShown=function(){return!0},n.prototype.editRemoveShown=function(){return!0},n}(n),a=function(n){function o(t){this[t]=new e}return t(o,n),o.prototype.newFormShown=function(){return!0},o}(n),r=function(e){function n(t,e,n){this.editIndex=n,this[t]=e,this[t].keepCopy()}return t(n,e),n.prototype.newButDisabled=function(){return!0},n.prototype.newButShown=function(){return!0},n}(n),function(t,e,n,s){var i;return i=function(){switch(e){case"browse":return new o(t);case"add":return new a(t);case"edit":return new r(t,n,s)}}()}}])}.call(this),function(){angular.module("voyageVoyage").factory("ResourceFactory",["$resource",function(t){return function(e){var n;return n=t("https://api.parse.com/1/classes/"+e+"/:objectId",{objectId:"@objectId"},{query:{isArray:!0,transformResponse:function(t,e){return angular.fromJson(t).results},cache:!0},update:{method:"PUT"},getById:{method:"GET",isArray:!1}})}}])}.call(this),function(){angular.module("voyageVoyage").service("PersistenceService",["$resource","$q","ResourceFactory","$log",function(t,e,n,o){return{loadResourceById:function(t,e){return n(t).getById({objectId:e})},loadResource:function(t){return n(t).query()},saveResource:function(t,e){var r,a;return a=n(t),r=new a(e),e.objectId?r.$update().then(function(t){return e.commitChanges()})["catch"](function(t){return o.error(t),alert("Error!")}):r.$save().then(function(t){return e.objectId=t.objectId})["catch"](function(t){return o.error(t),alert("Error!")})},removeResource:function(t,e){var r,a;return a=n(t),r=new a({objectId:e.objectId}),r.$remove()["catch"](function(t){return o.error(t),alert("Error!")})}}}])}.call(this),function(){angular.module("voyageVoyage").service("ImageUploadService",["Upload",function(t){return{uploadImage:function(e,n){var o;return o=t.http({url:"https://api.parse.com/1/files/pic.jpg",headers:{"Content-Type":"image/jpeg"},data:e}),o.then(function(t){return n.image={__type:"File",name:t.data.name,url:t.data.url}})["catch"](function(t){return alert("Error!"),console.log(t)})}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("voyageVoyage").factory("Entity",function(){var e;return e=function(){function e(e){this.name=e,this.hasChanges=t(this.hasChanges,this)}var n;return n=null,e.prototype.keepCopy=function(){return n=e.fromJSON(this)},e.fromJSON=function(t){var n;return n=new e,angular.extend(n,t)},e.prototype.commitChanges=function(){return n=null},e.prototype.rejectChanges=function(){var t,e;for(t in n)e=n[t],"function"!=typeof n[t]&&(this[t]=n[t]);return n=null},e.prototype.hasChanges=function(){return!this.isEqual(n)},e.prototype.isEmpty=function(){return _.chain(_.keys(this)).filter(function(t){return"function"!=typeof this[t]},this).reduce(function(t,e){return t&!this[e]},!0,this).value()},e.prototype.isEqual=function(t){return _.chain(_.keys(this)).filter(function(t){return"function"!=typeof this[t]},this).reduce(function(e,n){return e&this[n]===t[n]},!0,this).value()},e.fromArray=function(t){var n,o;return o=function(){var o,r,a;for(a=[],o=0,r=t.length;r>o;o++)n=t[o],a.push(e.fromJSON(n));return a}()},e}()})}.call(this),function(){angular.module("voyageVoyage").service("CRUDService",["PersistenceService","$log",function(t,e){return{add:function(e,n,o,r){return t.saveResource(e,n),o.push(n),r("browse")},remove:function(e,n,o){var r;return r=o[n],t.removeResource(e,r),o.splice(n,1)},update:function(e,n,o){return t.saveResource(e,n),o("browse")},cancelEdit:function(t,e){return t.rejectChanges(),e("browse")}}}])}.call(this),function(){angular.module("voyageVoyage").config(["$routeProvider","$locationProvider","$httpProvider",function(t,e,n){return t.when("/",{templateUrl:"app/tours/index.html",controller:"ToursController"}).when("/tour/:slug",{templateUrl:"app/tours/show.html",controller:"TourController"}).when("/admin",{templateUrl:"app/admin/tours/index.html",controller:"AdminToursController"}).when("/admin/countries",{templateUrl:"app/admin/countries/index.html",controller:"CountriesController"}).when("/admin/places",{templateUrl:"app/admin/places/index.html",controller:"PlacesController"}).when("/admin/hotels",{templateUrl:"app/admin/hotels/index.html",controller:"HotelsController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0),n.defaults.headers.common={"X-Parse-Application-Id":"sXYBJKAzNLajxXs0SqkpjDmPKSY8eES5c4xOH275","X-Parse-REST-API-Key":"kqikw9hrrEcVjXzXYBl3CpWstA9RodV2tOoKqFa0"}}])}.call(this),angular.module("voyageVoyage").run(["$templateCache",function(t){t.put("app/shared/logo.html",'<div class="col-md-3"><span class="logo"><a href="/">VoyageVoyage</a></span></div>'),t.put("app/tours/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include><div class="col-md-2"><select class="form-control" id="" ng-change="updatePlaceList()" ng-model="selectedCountry" ng-options="country.name for country in countries"><option value="">--Выберите страну--</option></select></div><div class="col-md-2"><select class="form-control" id="" name="" ng-model="selectedPlace" ng-options="place.name for place in places"><option value="">--Выберите место--</option></select></div></div><div class="entry" ng-repeat="tour in tours | filter: countryFilter | filter: placeFilter"><div class="row item user"><div class="col-md-3"><div class="image"><img alt="" height="130" ng-src="{{ tour.image.url }}" src="" width="230"></div></div><div class="col-md-9"><div class="row"><div class="title col-md-7 nopadding"><a ng-href="/#/tour/{{ tour.objectId }}">{{tour.title}}</a><div class="label label-primary">{{ getCountryById(tour.countryId)}}</div><span class="label label-success">{{ getPlaceById(tour.placeId)}}</span><span class="label label-info">{{ tour.duration + \' ночей\' }}</span></div><span class="price pull-right col-md-2">{{tour.price | currency: "₽ " : 0}}</span></div><div class="row hotel nopadding"><span ng-hide="$index == state.editIndex">{{ getHotelById(tour.hotelId).name }} &nbsp;{{ getHotelById(tour.hotelId).stars }}*</span></div><div class="row description">{{shortenText(tour.text)}}<a ng-href="/#/tour/{{ tour.objectId }}">далее</a></div></div></div></div>'),t.put("app/tours/show.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="row"><div class="col-md-3"><img alt="" height="130" ng-src="{{ tour.image.url }}" src="" width="230"></div><div class="col-md-9"><h1>{{ tour.title }}</h1><h3>{{ hotel.stars + \'*\' }} {{ hotel.name }}</h3><span class="label label-primary">{{ country.name }}</span><span class="label label-success">{{ place.name }}</span><hr>{{tour.text}}</div></div>'),t.put("app/admin/countries/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" href="" ng-click="setState(&#39;add&#39;)" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()">Создать</a><input ng-model="state.country.name" ng-show="state.newFormShown()" placeholder="наименование" type="text"><button ng-show="state.newFormShown()" ngf-select="upload($file)">Set image</button><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="state.newFormShown()">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="add()" ng-show="state.newFormShown()">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="country in countries"><td><img height="20" ng-src="{{ country.image.url }}"></td><td><span ng-show="$index != state.editIndex">{{country.name}}</span><input ng-model="state.country.name" ng-show="$index == state.editIndex" placeholder="наименование" type="text"><button ng-show="$index == state.editIndex" ngf-select="upload($file)">Set image</button></td><td><a class="action pull-right" href="" ng-click="remove($index)" ng-show="state.editRemoveShown()">Удалить</a><a class="action pull-right" href="" ng-click="setState(&#39;edit&#39;, $index, country)" ng-show="state.editRemoveShown()">Редактировать</a><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="$index == state.editIndex">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/hotels/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" href="" ng-click="setState(&#39;add&#39;)" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()">Создать</a><input ng-model="state.hotel.name" ng-show="state.newFormShown()" placeholder="наименование" type="text"><input max="5" min="0" ng-model="state.hotel.stars" ng-show="state.newFormShown()" type="number"><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="state.newFormShown()">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="add()" ng-show="state.newFormShown()">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="hotel in hotels"><td><span ng-show="$index != state.editIndex">{{hotel.name}}</span><input ng-model="state.hotel.name" ng-show="$index == state.editIndex" placeholder="наименование" type="text"></td><td><span ng-show="$index != state.editIndex">{{hotel.stars}}*</span><input max="5" min="0" ng-model="state.hotel.stars" ng-show="$index == state.editIndex" type="number"></td><td><a class="action pull-right" href="" ng-click="remove($index)" ng-show="state.editRemoveShown()">Удалить</a><a class="action pull-right" href="" ng-click="setState(&#39;edit&#39;, $index, hotel)" ng-show="state.editRemoveShown()">Редактировать</a><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="$index == state.editIndex">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/places/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include></div><div class="row item"><div class="col-md-6"><div class="row action"><a class="btn btn-primary" href="" ng-click="setState(&#39;add&#39;)" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()">Создать</a><input ng-model="state.place.name" ng-show="state.newFormShown()" placeholder="наименование" type="text"><select class="form-control" ng-model="state.place.countryId" ng-options="country.objectId as country.name for country in countries" ng-show="state.newFormShown()"></select><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="state.newFormShown()">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="add()" ng-show="state.newFormShown()">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="place in places"><td><span ng-show="$index != state.editIndex">{{place.name}}</span><input ng-model="state.place.name" ng-show="$index == state.editIndex" placeholder="наименование" type="text"></td><td><span ng-show="$index != state.editIndex">{{ getCountryById(place.countryId) }}</span><select class="form-control" ng-model="state.place.countryId" ng-options="country.objectId as country.name for country in countries" ng-show="$index == state.editIndex"></select></td><td><a class="action pull-right" href="" ng-click="remove($index)" ng-show="state.editRemoveShown()">Удалить</a><a class="action pull-right" href="" ng-click="setState(&#39;edit&#39;, $index, place)" ng-show="state.editRemoveShown()">Редактировать</a><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;browse&#39;)" ng-show="$index == state.editIndex">Отмена</a><a class="btn btn-primary pull-right" href="" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</a></td></tr></tbody></table></div></div>'),t.put("app/admin/tours/index.html",'<div class="row top-row"><ng-include src="&#39;app/shared/logo.html&#39;"></ng-include><div class="col-md-3 col-md-offset-6"><span ng-show="state.newButShown()"><a class="btn btn-default pull-right" href="" ng-click="setState(&#39;new&#39;)">Add new</a></span></div></div><div class="row" ng-show="state.newFormShown()"><div class="col-md-8"><form class="form-horizontal"><div class="form-group"><label for="title">Заголовок</label><input class="form-control" ng-model="tour.title" placeholder="Title" type="text"></div><div class="form-group"><label for="text">Описание</label><textarea class="form-control" ng-model="tour.text" placeholder="Description" rows="3"></textarea></div><div class="form-group"><label for="country">Продолжительность</label><input class="form-control" min="1" ng-model="tour.duration" placeholder="Duration" type="number"></div><div class="form-group"><label for="country">Страна</label><select class="form-control" id="" name="" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries"><option value="">--Выберите страну--</option></select></div><div class="form-group"><label for="country">Место</label><select class="form-control" id="" name="" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places"><option value="">--Выберите место--</option></select></div><div class="form-group"><label for="country">Отель</label><select class="form-control" id="" name="" ng-model="tour.hotelId" ng-options="hotel.objectId as hotel.name for hotel in hotels"><option value="">--Выберите отель--</option></select></div><div class="form-group"><div class="col-sm-3 nopadding"><label for="price">Цена</label><input class="form-control" ng-model="tour.price" placeholder="Price" type="number"></div></div><div class="form-group"><div class="col-sm-3 nopadding"><button ng-show="state.newFormShown()" ngf-select="upload($file)">Set image</button></div></div><div class="form-group"><button class="btn btn-primary" ng-click="add()">Создать</button><button class="btn btn-default" ng-click="cancel()">Отменить</button></div></form></div></div><div class="entry" ng-repeat="tour in tours track by $index" ng-show="state.listShown()"><div class="row item"><div class="col-md-3"><div class="img"><img alt="" height="130" ng-src="{{ tour.image.url }}" src="" width="230"><button ng-show="$index == state.editIndex" ngf-select="upload($file)">Set image</button></div></div><div class="col-md-9"><div class="row"><div class="title col-md-6 nopadding" ng-class="$index == state.editIndex ? &#39;col-md-3&#39; : &#39;col-md-6&#39;"><span ng-hide="$index == state.editIndex">{{tour.title}}<span class="label label-primary" ng-hide="$index == state.editIndex">{{ getCountryById(tour.countryId) }}</span><span class="label label-success" ng-hide="$index == state.editIndex">{{ getPlaceById(tour.placeId) }}</span><span class="label label-info" ng-hide="$index == state.editIndex">{{ tour.duration + \' ночей\' }}</span></span><input class="form-control" ng-model="tour.title" ng-show="$index == state.editIndex" placeholder="Title" type="text"></div><div class="title col-md-2 nopadding"><select class="form-control" id="" name="" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries" ng-show="$index == state.editIndex"><option value="">--Выберите страну--</option></select></div><div class="title col-md-2 nopadding"><select class="form-control" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places" ng-show="$index == state.editIndex"><option value="">--Выберите место--</option></select></div><div class="title col-md-2 nopadding"><input class="form-control" min="1" ng-model="tour.duration" ng-show="$index == state.editIndex" placeholder="Duration" type="number"></div><div class="price pull-right col-md-2"><span ng-hide="$index == state.editIndex">{{tour.price | currency: "₽ " : 0}}</span><input class="form-control" ng-model="tour.price" ng-show="$index == state.editIndex" placeholder="Price" type="number"></div></div><div class="row hotel"><span ng-hide="$index == state.editIndex">{{ getHotelById(tour.hotelId).stars }}*{{ getHotelById(tour.hotelId).name }}</span><select class="form-control" ng-model="tour.hotelId" ng-options="hotel.objectId as hotel.name for hotel in hotels" ng-show="$index == state.editIndex"><option value="">Выберите отель</option></select></div><div class="row description"><span ng-hide="$index == state.editIndex">{{tour.text}}</span><textarea class="form-control" ng-model="tour.text" ng-show="$index == state.editIndex" placeholder="Description" rows="3"></textarea></div><div class="row"><a class="action pull-right" href="" ng-click="setState(&#39;inlineEdit&#39;, tour, $index)" ng-hide="$index == state.editIndex">Edit</a><a class="action pull-right" href="" ng-click="remove($index)" ng-hide="$index == state.editIndex">Remove</a><button class="btn btn-primary" ng-click="update()" ng-show="$index == state.editIndex">Сохранить</button><button class="btn btn-default" ng-click="cancel()" ng-show="$index == state.editIndex">Отменить</button></div></div></div></div>')}]);