(function(){angular.module("voyageVoyage",["ngRoute","ngResource","underscore"])}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;angular.module("voyageVoyage").factory("TourStateFactory",["Entity",function(n){var o,r,i,a,s;return o=function(){function t(){this.tour=null}return t.prototype.newFormShown=function(){return!1},t.prototype.listShown=function(){return!1},t.prototype.newButShown=function(){return!1},t.prototype.tour=null,t.prototype.editIndex=null,t.prototype.canCancel=function(){return!0},t}(),a=function(o){function r(){this.canCancel=t(this.canCancel,this),this.tour=new n}return e(r,o),r.prototype.newFormShown=function(){return!0},r.prototype.canCancel=function(){return this.tour.isEmpty()},r}(o),i=function(t){function n(t,e){this.tour=t,this.editIndex=e,this.tour.keepCopy()}return e(n,t),n.prototype.listShown=function(){return!0},n.prototype.canCancel=function(){return!this.tour.hasChanges()},n}(o),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.listShown=function(){return!0},n.prototype.newButShown=function(){return!0},n}(o),s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.listShown=function(){return!0},n}(o),function(t,e,n){var o;return o=function(){switch(t){case"browse":return new r;case"new":return new a;case"inlineEdit":return new i(e,n)}}()}}])}.call(this),function(){angular.module("voyageVoyage").controller("AdminToursController",["$scope","$q","PersistenceService","TourStateFactory","Entity","_",function(t,e,n,o,r,i){var a,s,u,c,l,d,p,h,f;return s="Есть несохраненные изменения. Продолжить?",a="Удалить тур?",d=function(){return n.loadResource("place").$promise},c=function(){return n.loadResource("country").$promise},l=function(){return n.loadResource("hotel").$promise},u=function(){return n.loadResource("tour").$promise},f=function(t){return n.saveResource("tour",t)},h=function(t){return n.removeResource("tour",t)},p={tours:u(),places:d(),countries:c(),hotels:l()},e.all(p).then(function(e){return t.tours=r.fromArray(e.tours),t.countries=e.countries,t.places=e.places,t.hotels=e.hotels})["catch"](function(t){return alert(t)}),t.setState=function(e,n,r){return t.state=new o(e,n,r),t.tour=t.state.tour},t.setState("browse"),t.add=function(){return t.tours.push(this.tour),f(this.tour),t.setState("browse")},t.update=function(){return t.tour.commitChanges(),f(this.tour),t.setState("browse")},t.cancel=function(){return t.state.canCancel()||confirm(s)?(t.tour.rejectChanges(),t.setState("browse")):void 0},t.remove=function(e){return confirm(a)?(t.tours.splice(e,1),h(this.tour)):void 0},t.getCountryById=function(e){var n;return n=i.find(t.countries,function(t){return t.objectId===e}),i.result(n,"name","n/a")},t.getPlaceById=function(e){var n;return n=i.find(t.places,function(t){return t.objectId===e}),i.result(n,"name","n/a")},t.getHotelById=function(e){var n;return n=i.find(t.hotels,function(t){return t.objectId===e})}}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n,o,r,i,a){this.title=t,this.text=n,this.countryId=o,this.duration=r,this.placeId=i,this.price=a,this.hasChanges=e(this.hasChanges,this),this.rejectChanges=e(this.rejectChanges,this)}var n;return n=null,t.prototype.keepCopy=function(){return n=(new t).fromJSON(this)},t.fromJson=function(e){var n;return n=new t,angular.extend(n,e),n},t.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.title=t.title,this.text=t.text,this.countryId=t.countryId,this.duration=t.duration,this.placeId=t.placeId,this.price=t.price,this},t.prototype.commitChanges=function(){return n=null},t.prototype.rejectChanges=function(){return n&&(this.objectId=n.objectId,this.title=n.title,this.text=n.text,this.countryId=n.countryId,this.duration=n.duration,this.price=n.price),n=null},t.prototype.hasChanges=function(){return!this.isEqual(n)},t.prototype.isEmpty=function(){return!this.title&!this.text&!this.countryId&!this.price&!this.duration},t.prototype.isEqual=function(t){return this.text===t.text&&this.title===t.title&&this.countryId===t.countryId&&this.price===t.price},t}()}.call(this),function(){var t,e,n,o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;o=function(){function t(){this.place=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.newButShown=function(){return!0},e.prototype.editRemoveShown=function(){return!0},e}(o),n=function(t){function e(){this.place=new Place}return r(e,t),e.prototype.newFormShown=function(){return!0},e}(o),e=function(t){function e(t,e){this.place=t,this.editIndex=e,this.place.keepCopy()}return r(e,t),e.prototype.newButDisabled=function(){return!0},e.prototype.newButShown=function(){return!0},e}(o)}.call(this),function(){angular.module("voyageVoyage").controller("PlacesController",["$scope","$q","PersistenceService","SimpleStateFactory","Entity",function(t,e,n,o,r){var i,a,s,u,c;return a=function(){return n.loadResource("country").$promise},i=function(){return n.loadResource("place").$promise},c=function(t){return n.saveResource("place",t)},u=function(t){return n.removeResource("place",t)},t.setState=function(e,n,r){return t.state=new o("place",e,r,n)},s={places:i(),countries:a()},e.all(s).then(function(e){return t.places=r.fromArray(e.places),t.countries=e.countries,t.setState("browse")}),t.add=function(){return c(t.state.place),t.places.push(t.state.place),t.setState("browse")},t.update=function(){return c(t.state.place),t.state.place.commitChanges(),t.setState("browse")},t.cancelEdit=function(){return t.state.place.rejectChanges(),t.setState("browse")},t.remove=function(e){var n;return confirm("Удалить?")?(n=t.places[e],console.log(n),u(n),t.places.splice(e,1)):void 0},t.getCountryById=function(e){var n;return n=_.find(t.countries,function(t){return t.objectId===e}),n.name||"n/a"}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("voyageVoyage").factory("Place",function(){var e;return e=function(){function e(e){this.name=e,this.hasChanges=t(this.hasChanges,this)}var n;return n=null,e.prototype.keepCopy=function(){return n=(new e).fromJSON(this)},e.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.name=t.name,this.countryId=t.countryId,this},e.prototype.commitChanges=function(){return n=null},e.prototype.rejectChanges=function(){return n&&(this.name=n.name,this.countryId=n.countryId),n=null},e.prototype.hasChanges=function(){return!this.isEqual(n)},e.prototype.isEmpty=function(){return!this.name},e.prototype.isEqual=function(t){return this.name===t.name},e}()})}.call(this),function(){angular.module("voyageVoyage").controller("HotelsController",["$scope","PersistenceService","Entity","SimpleStateFactory",function(t,e,n,o){var r,i,a;return r=function(){return e.loadResource("hotel").$promise},a=function(t){return e.saveResource("hotel",t)},i=function(t){return e.removeResource("hotel",t)},r().then(function(e){return t.hotels=n.fromArray(e)}),t.setState=function(e,n,r){return t.state=new o("hotel",e,r,n)},t.state=t.setState("browse"),t.add=function(){return a(t.state.hotel),t.hotels.push(t.state.hotel),t.setState("browse")},t.update=function(){return a(t.state.hotel),t.state.hotel.commitChanges(),t.setState("browse")},t.cancelEdit=function(){return t.state.hotel.rejectChanges(),t.setState("browse")},t.remove=function(e){var n;return confirm("Удалить?")?(n=t.hotels[e],i(hotel),t.hotels.splice(e,1)):void 0}}])}.call(this),function(){var t=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},e={}.hasOwnProperty;angular.module("voyageVoyage").factory("SimpleStateFactory",["Entity",function(e){var n,o,r,i;return n=function(){function t(t){this[t]=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.newButShown=function(){return!0},n.prototype.editRemoveShown=function(){return!0},n}(n),i=function(n){function o(t){this[t]=new e}return t(o,n),o.prototype.newFormShown=function(){return!0},o}(n),r=function(e){function n(t,e,n){this.editIndex=n,this[t]=e,this[t].keepCopy()}return t(n,e),n.prototype.newButDisabled=function(){return!0},n.prototype.newButShown=function(){return!0},n}(n),function(t,e,n,a){var s;return console.log(e),s=function(){switch(e){case"browse":return new o(t);case"add":return new i(t);case"edit":return new r(t,n,a)}}()}}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.name=t,this.hasChanges=e(this.hasChanges,this)}var n;return n=null,t.prototype.keepCopy=function(){return n=(new t).fromJSON(this)},t.prototype.fromJSON=function(t){return this.objectId=t.objectId,this.name=t.name,this},t.prototype.commitChanges=function(){return n=null},t.prototype.rejectChanges=function(){return n&&(this.name=n.name),n=null},t.prototype.hasChanges=function(){return!this.isEqual(n)},t.prototype.isEmpty=function(){return!this.name},t.prototype.isEqual=function(t){return this.name===t.name},t}()}.call(this),function(){var t,e,n,o,r=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(){function t(){this.country=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.newButShown=function(){return!0},e.prototype.editRemoveShown=function(){return!0},e}(t),o=function(t){function e(){this.country=new Country}return r(e,t),e.prototype.newFormShown=function(){return!0},e}(t),n=function(t){function e(t,e){this.country=t,this.editIndex=e,this.country.keepCopy()}return r(e,t),e.prototype.newButDisabled=function(){return!0},e.prototype.newButShown=function(){return!0},e}(t)}.call(this),function(){angular.module("voyageVoyage").controller("CountriesController",["$scope","PersistenceService","Entity","SimpleStateFactory",function(t,e,n,o){var r,i,a;return r=function(){return e.loadResource("country")},a=function(t){return e.saveResource("country",t)},i=function(t){return e.removeResource("country",t)},t.setState=function(e,n,r){return t.state=new o("country",e,r,n)},r().$promise.then(function(e){return t.countries=n.fromArray(e),t.setState("browse")}),t.add=function(){return a(t.state.country),t.countries.push(t.state.country),t.setState("browse")},t.update=function(){return a(t.state.country),t.setState("browse")},t.cancelEdit=function(){return t.state.country.rejectChanges(),t.setState("browse")},t.remove=function(e){var n;return confirm("Удалить?")?(n=t.countries[e],i(n),t.countries.splice(e,1)):void 0}}])}.call(this),function(){angular.module("voyageVoyage").controller("ToursController",["$scope","$q","PersistenceService","_",function(t,e,n,o){var r,i,a,s,u,c;return u=function(){return n.loadResource("place").$promise},a=function(){return n.loadResource("country").$promise},s=function(){return n.loadResource("hotel").$promise},i=function(){return n.loadResource("tour").$promise},r=[],c={tours:i(),places:u(),countries:a(),hotels:s()},e.all(c).then(function(e){return console.log(e),t.tours=e.tours,t.countries=e.countries,t.hotels=e.hotels,r=e.places,t.places=r}),t.countryFilter=function(e){return t.selectedCountry?e.countryId===t.selectedCountry.objectId:!0},t.placeFilter=function(e){return t.selectedPlace?e.placeId===t.selectedPlace.objectId:!0},t.shortenText=function(t){return t.substring(0,350)+"..."},t.updatePlaceList=function(){return t.places=t.selectedCountry?o.where(r,{countryId:t.selectedCountry.objectId}):r},t.getCountryById=function(e){var n;return n=o.find(t.countries,function(t){return t.objectId===e}),o.result(n,"name","n/a")},t.getPlaceById=function(e){var n;return n=o.find(t.places,function(t){return t.objectId===e}),o.result(n,"name","n/a")},t.getHotelById=function(e){var n;return n=o.find(t.hotels,function(t){return t.objectId===e})}}])}.call(this),function(){angular.module("voyageVoyage").controller("TourController",["$scope","$routeParams","PersistenceService","_",function(t,e,n,o){var r;return r=function(){return n.loadResourceById("country",t.tour.countryId).$promise.then(function(e){return t.country=e}),n.loadResourceById("place",t.tour.placeId).$promise.then(function(e){return t.place=e}),n.loadResourceById("hotel",t.tour.hotelId).$promise.then(function(e){return t.hotel=e})},n.loadResourceById("tour",e.slug).$promise.then(function(e){return function(e){return t.tour=e,r()}}(this))}])}.call(this),function(){var t=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},e={}.hasOwnProperty;angular.module("voyageVoyage").factory("SimpleStateFactory",["Entity",function(e){var n,o,r,i;return n=function(){function t(t){this[t]=null}return t.prototype.newButShown=function(){return!1},t.prototype.newButDisabled=function(){return!1},t.prototype.newFormShown=function(){return!1},t.prototype.editRemoveShown=function(){return!1},t.prototype.editIndex=null,t}(),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.newButShown=function(){return!0},n.prototype.editRemoveShown=function(){return!0},n}(n),i=function(n){function o(t){this[t]=new e}return t(o,n),o.prototype.newFormShown=function(){return!0},o}(n),r=function(e){function n(t,e,n){this.editIndex=n,this[t]=e,this[t].keepCopy()}return t(n,e),n.prototype.newButDisabled=function(){return!0},n.prototype.newButShown=function(){return!0},n}(n),function(t,e,n,a){var s;return console.log(e),s=function(){switch(e){case"browse":return new o(t);case"add":return new i(t);case"edit":return new r(t,n,a)}}()}}])}.call(this),function(){angular.module("voyageVoyage").factory("ResourceFactory",["$resource",function(t){return function(e){var n;return n=t("https://api.parse.com/1/classes/"+e+"/:objectId",{objectId:"@objectId"},{query:{isArray:!0,transformResponse:function(t,e){return angular.fromJson(t).results},cache:!0},update:{method:"PUT"},getById:{method:"GET",isArray:!1}})}}])}.call(this),function(){angular.module("voyageVoyage").service("PersistenceService",["$resource","$q","ResourceFactory","$log",function(t,e,n,o){return{loadResourceById:function(t,e){return n(t).getById({objectId:e})},loadResource:function(t){return n(t).query()},saveResource:function(t,e){var r,i;return i=n(t),r=new i(e),e.objectId?r.$update().then(function(t){return e.commitChanges()})["catch"](function(t){return o.error(t),alert("Error!")}):r.$save().then(function(t){return e.objectId=t.objectId})["catch"](function(t){return o.error(t),alert("Error!")})},removeResource:function(t,e){var r,i;return i=n(t),r=new i({objectId:e.objectId}),r.$remove()["catch"](function(t){return o.error(t),alert("Error!")})},countriesDefault:function(){return[{id:0,name:"Россия"},{id:1,name:"США"},{id:2,name:"Испания"},{id:3,name:"Турция"},{id:4,name:"Греция"},{id:5,name:"Чехия"}]},toursDefault:function(){var t;return t="Lorem ipsum dolor sit amet. Magnam aliquam quaerat voluptatem sequi. Corporis suscipit laboriosam, nisi ut enim ipsam voluptatem quia. Velit esse, quam nihil impedit, quo voluptas nulla. Sint, obcaecati cupiditate non recusandae ipsam voluptatem, quia voluptas nulla vero. Officia deserunt mollitia animi, id est laborum et harum. Aperiam eaque ipsa, quae ab illo inventore veritatis et dolore magnam aliquam. Voluptas sit, amet, consectetur adipisci. Deleniti atque corrupti, quos dolores eos, qui dolorem ipsum.",[{id:0,title:"Баден Баден",countryId:5,text:t,price:5e3},{id:1,title:"Маунтин Вью",countryId:1,text:t,price:4e4},{id:2,title:"Байкал",countryId:0,text:t,price:8e3},{id:3,title:"Корфу",countryId:4,text:t,price:8e3},{id:4,title:"Коста Брава",countryId:2,text:t,price:90500}]},save:function(t){return localStorage.setItem("tours",angular.toJson(t))},load:function(){var t;return localStorage.getItem("tours")?t=angular.fromJson(localStorage.getItem("tours")):this.toursDefault()}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("voyageVoyage").factory("Entity",function(){var e;return e=function(){function e(e){this.name=e,this.hasChanges=t(this.hasChanges,this)}var n;return n=null,e.prototype.keepCopy=function(){return n=e.fromJSON(this)},e.fromJSON=function(t){var n;return n=new e,angular.extend(n,t),n},e.prototype.commitChanges=function(){return n=null},e.prototype.rejectChanges=function(){var t,e;for(t in n)e=n[t],"function"!=typeof n[t]&&(this[t]=n[t]);return n=null},e.prototype.hasChanges=function(){return!this.isEqual(n)},e.prototype.isEmpty=function(){var t,e,n;e=!0;for(t in this)n=this[t],"function"!=typeof this[t]&&(e&=!this[t]);return e},e.prototype.isEqual=function(t){var e,n,o;n=!0;for(e in this)o=this[e],"function"!=typeof this[e]&&(n&=this[e]===t[e]);return n},e.fromArray=function(t){var n,o;return o=function(){var o,r,i;for(i=[],o=0,r=t.length;r>o;o++)n=t[o],i.push(e.fromJSON(n));return i}()},e}()})}.call(this),function(){angular.module("voyageVoyage").config(["$routeProvider","$locationProvider","$httpProvider",function(t,e,n){return t.when("/",{templateUrl:"app/tours/index.html",controller:"ToursController"}).when("/tour/:slug",{templateUrl:"app/tours/show.html",controller:"TourController"}).when("/admin",{templateUrl:"app/admin/tours/index.html",controller:"AdminToursController"}).when("/admin/countries",{templateUrl:"app/admin/countries/index.html",controller:"CountriesController"}).when("/admin/places",{templateUrl:"app/admin/places/index.html",controller:"PlacesController"}).when("/admin/hotels",{templateUrl:"app/admin/hotels/index.html",controller:"HotelsController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0),n.defaults.headers.common={"X-Parse-Application-Id":"sXYBJKAzNLajxXs0SqkpjDmPKSY8eES5c4xOH275","X-Parse-REST-API-Key":"kqikw9hrrEcVjXzXYBl3CpWstA9RodV2tOoKqFa0"}}])}.call(this),angular.module("voyageVoyage").run(["$templateCache",function(t){t.put("app/tours/index.html",'<div class="row top-row"><div class="col-md-3 nopadding"><span class="logo">VoyageVoyage</span></div><div class="col-md-2 nopadding"><select id="" class="form-control" ng-model="selectedCountry" ng-options="country.name for country in countries" ng-change="updatePlaceList()"><option value="">--Выберите страну--</option></select></div><div class="col-md-2 nopadding"><select id="" class="form-control" ng-model="selectedPlace" ng-options="place.name for place in places" name=""><option value="">--Выберите место--</option></select></div></div><div ng-repeat="tour in tours | filter: countryFilter | filter: placeFilter" class="entry"><div class="row"><div class="col-md-3 nopadding"><img src="" alt="" height="100" width="200"></div><div class="col-md-9"><div class="row"><div class="title col-md-6 nopadding"><a ng-href="/#/tour/{{ tour.objectId }}">{{tour.title}}</a><div class="label label-primary">{{getCountryById(tour.countryId)}}</div><span class="label label-success">{{getPlaceById(tour.placeId)}}</span> <span class="label label-info">{{ tour.duration + \' ночей\' }}</span></div><span class="price pull-right col-md-3">{{tour.price | currency: "&#8381; " : 0}}</span></div><div class="row hotel"><span ng-hide="$index == state.editIndex">{{ getHotelById(tour.hotelId).stars }}* {{ getHotelById(tour.hotelId).name }}</span></div><div class="row description">{{shortenText(tour.text)}} <a ng-href="/#/tour/{{ tour.objectId }}">далее</a></div></div></div></div>'),t.put("app/tours/show.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="row"><div class="col-md-3"><img src="" alt="" height="100" width="200"></div><div class="col-md-9"><h1>{{ tour.title }}</h1><h3>{{ hotel.stars + \'*\' }} {{ hotel.name }}</h3><span class="label label-primary">{{ country.name }}</span> <span class="label label-success">{{ place.name }}</span><hr>{{tour.text}}</div></div>'),t.put("app/admin/countries/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()" ng-click="setState(\'add\')" href="">Создать</a> <input type="text" ng-model="state.country.name" ng-show="state.newFormShown()" placeholder="наименование"> <a class="btn btn-default pull-right" ng-show="state.newFormShown()" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="state.newFormShown()" ng-click="add()" href="">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="country in countries"><td><span ng-show="$index != state.editIndex">{{country.name}}</span> <input type="text" ng-model="state.country.name" ng-show="$index == state.editIndex" placeholder="наименование"></td><td><a href="" ng-click="remove($index)" ng-show="state.editRemoveShown()" class="action pull-right">Удалить</a> <a href="" ng-click="setState(\'edit\', $index, country)" ng-show="state.editRemoveShown()" class="action pull-right">Редактировать</a> <a class="btn btn-default pull-right" ng-show="$index == state.editIndex" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="$index == state.editIndex" ng-click="update()" href="">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/hotels/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()" ng-click="setState(\'add\')" href="">Создать</a> <input type="text" ng-model="state.hotel.name" ng-show="state.newFormShown()" placeholder="наименование"> <input type="number" ng-model="state.hotel.stars" ng-show="state.newFormShown()" min="0" max="5"> <a class="btn btn-default pull-right" ng-show="state.newFormShown()" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="state.newFormShown()" ng-click="add()" href="">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="hotel in hotels"><td><span ng-show="$index != state.editIndex">{{hotel.name}}</span> <input type="text" ng-model="state.hotel.name" ng-show="$index == state.editIndex" placeholder="наименование"></td><td><span ng-show="$index != state.editIndex">{{hotel.stars}}*</span> <input type="number" ng-model="state.hotel.stars" ng-show="$index == state.editIndex" min="0" max="5"></td><td><a href="" ng-click="remove($index)" ng-show="state.editRemoveShown()" class="action pull-right">Удалить</a> <a href="" ng-click="setState(\'edit\', $index, hotel)" ng-show="state.editRemoveShown()" class="action pull-right">Редактировать</a> <a class="btn btn-default pull-right" ng-show="$index == state.editIndex" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="$index == state.editIndex" ng-click="update()" href="">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/places/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage</span></div><div class="col-md-6"><div class="row action"><a class="btn btn-primary" ng-disabled="state.newButDisabled()" ng-show="state.newButShown()" ng-click="setState(\'add\')" href="">Создать</a> <input type="text" ng-model="state.place.name" ng-show="state.newFormShown()" placeholder="наименование"><select ng-show="state.newFormShown()" id="" class="form-control" ng-model="state.place.countryId" ng-options="country.objectId as country.name for country in countries" name=""></select><a class="btn btn-default pull-right" ng-show="state.newFormShown()" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="state.newFormShown()" ng-click="add()" href="">Сохранить</a></div><table class="table table-condensed"><tbody><tr ng-repeat="place in places"><td><span ng-show="$index != state.editIndex">{{place.name}}</span> <input type="text" ng-model="state.place.name" ng-show="$index == state.editIndex" placeholder="наименование"></td><td><span ng-show="$index != state.editIndex">{{ getCountryById(place.countryId) }}</span><select ng-show="$index == state.editIndex" id="" class="form-control" ng-model="state.place.countryId" ng-options="country.objectId as country.name for country in countries" name=""></select></td><td><a href="" ng-click="remove($index)" ng-show="state.editRemoveShown()" class="action pull-right">Удалить</a> <a href="" ng-click="setState(\'edit\', $index, place)" ng-show="state.editRemoveShown()" class="action pull-right">Редактировать</a> <a class="btn btn-default pull-right" ng-show="$index == state.editIndex" ng-click="setState(\'browse\')" href="">Отмена</a> <a class="btn btn-primary pull-right" ng-show="$index == state.editIndex" ng-click="update()" href="">Сохранить</a></td></tr></tbody></table></div>'),t.put("app/admin/tours/index.html",'<div class="row top-row"><span class="logo">VoyageVoyage {{ title }}</span> <span ng-show="state.newButShown()"><a class="btn btn-default pull-right" ng-click="setState(\'new\')" href="">Add new</a></span></div><div class="row" ng-show="state.newFormShown()"><div class="col-md-8"><form class="form-horizontal"><div class="form-group"><label for="title">Заголовок</label> <input ng-model="tour.title" type="text" class="form-control" placeholder="Title"></div><div class="form-group"><label for="text">Описание</label> <textarea ng-model="tour.text" class="form-control" rows="3" placeholder="Description"></textarea></div><div class="form-group"><label for="country">Продолжительность</label> <input ng-model="tour.duration" type="number" min="1" class="form-control" placeholder="Duration"></div><div class="form-group"><label for="country">Страна</label><select id="" class="form-control" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries" name=""><option value="">--Выберите страну--</option></select></div><div class="form-group"><label for="country">Место</label><select id="" class="form-control" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places" name=""><option value="">--Выберите место--</option></select></div><div class="form-group"><label for="country">Отель</label><select id="" class="form-control" ng-model="tour.hotelId" ng-options="hotel.objectId as hotel.name for hotel in hotels" name=""><option value="">--Выберите отель--</option></select></div><div class="form-group"><div class="col-sm-3 nopadding"><label for="price">Цена</label> <input ng-model="tour.price" class="form-control" type="number" placeholder="Price"></div></div><div class="form-group"><button ng-click="add()" class="btn btn-primary">Создать</button> <button ng-click="cancel()" class="btn btn-default">Отменить</button></div></form></div></div><div ng-show="state.listShown()" ng-repeat="tour in tours track by $index" class="entry"><div class="row"><div class="col-md-3"><img src="" alt="" height="100" width="200"></div><div class="col-md-9"><div class="row"><div class="title col-md-6 nopadding" ng-class="$index == state.editIndex ? \'col-md-3\' : \'col-md-6\'"><span ng-hide="$index == state.editIndex">{{tour.title}} <span ng-hide="$index == state.editIndex" class="label label-primary">{{getCountryById(tour.countryId)}}</span> <span ng-hide="$index == state.editIndex" class="label label-success">{{getPlaceById(tour.placeId)}}</span> <span ng-hide="$index == state.editIndex" class="label label-info">{{ tour.duration + \' ночей\' }}</span></span> <input ng-show="$index == state.editIndex" ng-model="tour.title" type="text" class="form-control" placeholder="Title"></div><div class="title col-md-2 nopadding"><select ng-show="$index == state.editIndex" id="" class="form-control" ng-model="tour.countryId" ng-options="country.objectId as country.name for country in countries" name=""><option value="">--Выберите страну--</option></select></div><div class="title col-md-2 nopadding"><select ng-show="$index == state.editIndex" id="" class="form-control" ng-model="tour.placeId" ng-options="place.objectId as place.name for place in places" name=""><option value="">--Выберите место--</option></select></div><div class="title col-md-2 nopadding"><input ng-show="$index == state.editIndex" ng-model="tour.duration" type="number" min="1" class="form-control" placeholder="Duration"></div><div class="price pull-right col-md-2"><span ng-hide="$index == state.editIndex">{{tour.price | currency: "&#8381; " : 0}}</span> <input ng-show="$index == state.editIndex" ng-model="tour.price" class="form-control" type="number" placeholder="Price"></div></div><div class="row hotel"><span ng-hide="$index == state.editIndex">{{ getHotelById(tour.hotelId).stars }}* {{ getHotelById(tour.hotelId).name }}</span><select ng-show="$index == state.editIndex" id="" class="form-control" ng-model="tour.hotelId" ng-options="hotel.objectId as hotel.name for hotel in hotels" name=""><option value="">--Выберите отель--</option></select></div><div class="row description"><span ng-hide="$index == state.editIndex">{{tour.text}}</span> <textarea ng-show="$index == state.editIndex" ng-model="tour.text" class="form-control" rows="3" placeholder="Description">\n        </textarea></div><div class="row"><a ng-hide="$index == state.editIndex" ng-click="setState(\'inlineEdit\', tour, $index)" href="" class="action pull-right">Edit</a> <a ng-hide="$index == state.editIndex" ng-click="remove($index)" href="" class="action pull-right">Remove</a><button ng-click="update()" ng-show="$index == state.editIndex" class="btn btn-primary">Сохранить</button> <button ng-click="cancel()" ng-show="$index == state.editIndex" class="btn btn-default">Отменить</button></div></div></div></div>')}]);