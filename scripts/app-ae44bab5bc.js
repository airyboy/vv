(function(){var t,e,i,r,n,o,u,s;r=angular.module("voyageVoyage",[]),i="Есть несохраненные изменения. Продолжить?",t="Удалить тур?",r.controller("ToursController",["$scope",function(r){return r.persistence={save:function(){return localStorage.setItem("tours",angular.toJson(r.tours))},load:function(){var t,i;return i=localStorage.getItem("tours"),r.tours=function(){var r,n,o,u;for(o=angular.fromJson(i),u=[],r=0,n=o.length;n>r;r++)t=o[r],u.push((new e).fromJSON(t));return u}()}},null!==localStorage.getItem("tours")?r.persistence.load():r.tours=s,r["new"]={tour:new e,isNew:!1,setNew:function(){return this.isNew=!0},add:function(){return r.tours.push(angular.copy(this.tour)),r.persistence.save(),this.reset()},reset:function(){return this.tour=new e,this.isNew=!1},cancel:function(){return this.tour.isEmpty()?this.reset():confirm(i)?this.reset():void 0}},r.edit={index:null,tour:null,isEdit:function(t){return null!==this.index&&this.index===t},setTour:function(t,e){return r.edit.index=t,r.edit.tour=angular.copy(e)},update:function(){return r.tours[this.index]=this.tour,r.persistence.save(),this.reset()},cancel:function(){return this.tour.areEqual(r.tours[this.index])?this.reset():confirm(i)?this.reset():void 0},reset:function(){return this.tour=null,this.index=null}},r.remove=function(e){return confirm(t)?(r.tours.splice(e,1),r.persistence.save()):void 0}}]),e=function(){function t(t,e,i,r){this.title=t,this.text=e,this.country=i,this.price=r}return t.prototype.isEmpty=function(){return!this.title&!this.text&!this.country&!this.price},t.prototype.areEqual=function(t){return this.text===t.text&&this.title===t.title&&this.country===t.country&&this.price===t.price},t.prototype.fromJSON=function(t){return this.title=t.title,this.text=t.text,this.country=t.country,this.price=t.price,this},t}(),u="Lorem ipsum dolor sit amet. Magnam aliquam quaerat voluptatem sequi. Corporis suscipit laboriosam, nisi ut enim ipsam voluptatem quia. Velit esse, quam nihil impedit, quo voluptas nulla. Sint, obcaecati cupiditate non recusandae ipsam voluptatem, quia voluptas nulla vero. Officia deserunt mollitia animi, id est laborum et harum. Aperiam eaque ipsa, quae ab illo inventore veritatis et dolore magnam aliquam. Voluptas sit, amet, consectetur adipisci. Deleniti atque corrupti, quos dolores eos, qui dolorem ipsum.",o=[{title:"Мытищи",country:"Россия",text:u,price:5e3},{title:"Реутов",country:"Россия",text:u,price:4e4},{title:"Одинцово",country:"Россия",text:u,price:8e3},{title:"Щербинка",country:"Россия",text:u,price:90500}],s=function(){var t,i,r;for(r=[],t=0,i=o.length;i>t;t++)n=o[t],r.push((new e).fromJSON(n));return r}()}).call(this);